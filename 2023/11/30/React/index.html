<!DOCTYPE html>
<html lang="zh-cn">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, shrink-to-fit=no">
    <meta name="referrer" content="origin">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <meta http-equiv="Cache-Control" content="no-transform">
    <meta http-equiv="Cache-Control" content="no-siteapp">
    <title>
        
            React
        
    </title>
    <link rel="shortcut icon" href="#"/>

    <link type="text/css" rel="stylesheet" href="/font/LongCang.css">
    <link type="text/css" rel="stylesheet" href="/font/Monda.css">
    <link type="text/css" rel="stylesheet" href="/font/NotoSansSC.css">
    <link type="text/css" rel="stylesheet" href="/font/NotoSerifSC.css">
    <link type="text/css" rel="stylesheet" href="/font/Playball.css">
    <link type="text/css" rel="stylesheet" href="/font/PTMono.css">
    <link type="text/css" rel="stylesheet" href="/font/Roboto.css">
    <link type="text/css" rel="stylesheet" href="/font/RobotoSlab.css">
    <link type="text/css" rel="stylesheet" href="/font/Rosario.css">
    <link type="text/css" rel="stylesheet" href="/font/UbuntuMono.css">

    <link type="text/css" rel="stylesheet" href="/css/base.css">
    <link type="text/css" rel="stylesheet" href="/css/code.css">

    <script type="text/javascript" src="/js/jquery-3.4.1.min.js"></script>
<meta name="generator" content="Hexo 6.3.0"></head>
<body>
    <a id="cover"></a>
    <link type="text/css" rel="stylesheet" href="/css/post.css">
<div id="header" class="header">
    <div class="vertical">
        <div class="inner">
            
                <h1 class="header-subtitle">React</h1>
                <div class="header-subinfo">
                    <p class="article-info-text">
                        <span>
                            <i class="iconfont icon-time"></i> 发表时间：2023-11-30
                        </span>
                        
                            
                                <span id="/2023/11/30/React/" class="leancloud_visitors" data-flag-title="React">
                                    <i class="iconfont icon-browse"></i> 阅读：<sapn class="leancloud-visitors-count"></span>
                                </span>
                            
                            
                                <span>
                                    <i class="iconfont icon-interactive"></i> 评论：<span class="valine-comment-count" data-xid="/2023/11/30/React/"></span>
                                </span>
                              
                        
                    </p>
                    
                        
                            <span class="category-color">前端</span>
                        
                    
                    
                        
                            <span class="tag-color">框架</span>
                        
                    
                </div>
            
        </div>
    </div>
    
</div>
<div id="container">
    
        <!-- 文章页面 -->
        <div id="article">
            <div class="toc"></div>
            <div class="article-body">
                <h1 id="React笔记"><a href="#React笔记" class="headerlink" title="React笔记"></a>React笔记</h1><h1 id="一、基本特点"><a href="#一、基本特点" class="headerlink" title="一、基本特点"></a>一、基本特点</h1><h2 id="1、初识"><a href="#1、初识" class="headerlink" title="1、初识"></a>1、初识</h2><p>开发React必须依赖三个库: react: 包含react所必须的核心代码 react-dom: react渲染在不同平台所需要的核心代码口</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">babel: 将jsx转换成React代码的工具</span><br></pre></td></tr></table></figure>

<ul>
<li><p>如何引入？</p>
<ul>
<li>CDN引入</li>
</ul>
<p><img src="https://s3-us-west-2.amazonaws.com/secure.notion-static.com/efca82b4-50ec-4fc6-a76d-a79562bdffc7/Untitled.png" alt="Untitled"></p>
<p><img src="C:\Users\hp-pc\AppData\Roaming\Typora\typora-user-images\image-20231130215401689.png" alt="image-20231130215401689"></p>
<ul>
<li>下载后，添加本地依赖</li>
<li>通过npm管理</li>
</ul>
</li>
<li><p>如何渲染？</p>
<ul>
<li><p>react18以前：</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">ReactDOM</span>.<span class="title function_">render</span>(<span class="language-xml"><span class="tag">&lt;<span class="name">h2</span>&gt;</span>Hello World<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span>,<span class="variable language_">document</span>.<span class="title function_">querySelector</span>(”#root”))</span><br></pre></td></tr></table></figure>
</li>
<li><p>react18之后：</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> root = <span class="title class_">ReactDOM</span>.<span class="title function_">createRoot</span>(<span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&quot;#root&quot;</span>))</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
</ul>
<h2 id="2、HelloReact案例"><a href="#2、HelloReact案例" class="headerlink" title="2、HelloReact案例"></a>2、HelloReact案例</h2><p>案例功能：</p>
<p><img src="https://s3-us-west-2.amazonaws.com/secure.notion-static.com/a3735851-f678-4943-af1e-1be958fff274/Untitled.png" alt="Untitled"></p>
<p>代码：</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">&lt;!<span class="variable constant_">DOCTYPE</span> html&gt;</span><br><span class="line">&lt;html lang=&quot;en&quot;&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;meta charset=&quot;UTF-8&quot;&gt;</span><br><span class="line">    &lt;meta http-equiv=&quot;X-UA-Compatible&quot; content=&quot;IE=edge&quot;&gt;</span><br><span class="line">    &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt;</span><br><span class="line">    &lt;title&gt;Document&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">    &lt;div id=&quot;root&quot;&gt;&lt;/div&gt;</span><br><span class="line"></span><br><span class="line">    &lt;script crossorigin src=&quot;&lt;https://unpkg.com/react@18/umd/react.development.js&gt;&quot;&gt;&lt;/script&gt;</span><br><span class="line">    &lt;script crossorigin src=&quot;&lt;https://unpkg.com/react-dom@18/umd/react-dom.development.js&gt;&quot;&gt;&lt;/script&gt;</span><br><span class="line">    &lt;script src=&quot;&lt;https://unpkg.com/babel-standalone@6/babel.min.js&gt;&quot;&gt;&lt;/script&gt;</span><br><span class="line">    &lt;script type=&quot;text/babel&quot;&gt;</span><br><span class="line">        const root = ReactDOM.createRoot(document.querySelector(&quot;#root&quot;))</span><br><span class="line">        //1、将文本定义成变量</span><br><span class="line">        let message = &quot;Hello World&quot;</span><br><span class="line">        //2、监听按钮点击</span><br><span class="line">        function btnClick()&#123;</span><br><span class="line">            //1、修改数据</span><br><span class="line">            message = &quot;Hello React&quot;</span><br><span class="line">           //2、重新渲染</span><br><span class="line">           rootRender() //react默认情况下不会重新渲染</span><br><span class="line">        &#125;</span><br><span class="line">        rootRender()</span><br><span class="line">        //3、封装渲染函数</span><br><span class="line">        function rootRender()&#123;</span><br><span class="line">            root.render((</span><br><span class="line">            &lt;div&gt;</span><br><span class="line">                &lt;h2&gt;&#123;message&#125;&lt;/h2&gt;</span><br><span class="line">                &lt;button onClick=&#123;btnClick&#125;&gt;修改&lt;/button&gt;    </span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">            ))</span><br><span class="line">        &#125;</span><br><span class="line">    &lt;/script&gt;</span><br><span class="line">    </span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<h2 id="3、组件化开发"><a href="#3、组件化开发" class="headerlink" title="3、组件化开发"></a>3、组件化开发</h2><ul>
<li><p>this</p>
<p>默认绑定this是指向window，但在严格模式下是undefined；</p>
<p>默认情况下在es6是严格模式；</p>
<p>babel转换默认是严格模式；</p>
</li>
</ul>
<p><strong>this.btnClick&#x3D;this.btnClick.bind(this)</strong></p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">App</span> <span class="keyword">extends</span> <span class="title class_ inherited__">React.Component</span>&#123;</span><br><span class="line">      <span class="comment">//组件数据</span></span><br><span class="line">      <span class="title function_">constructor</span>(<span class="params"></span>)&#123;</span><br><span class="line">          <span class="variable language_">super</span>()</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">state</span> = &#123;</span><br><span class="line">              <span class="attr">message</span>:<span class="string">&quot;Hello World&quot;</span></span><br><span class="line">          &#125;</span><br><span class="line">          <span class="comment">//对需要绑定的方法提前绑定</span></span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">btnClick</span>=<span class="variable language_">this</span>.<span class="property">btnClick</span>.<span class="title function_">bind</span>(<span class="variable language_">this</span>)</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="comment">//组件方法</span></span><br><span class="line">      <span class="title function_">btnClick</span>(<span class="params"></span>)&#123;</span><br><span class="line">          <span class="variable language_">this</span>.<span class="title function_">setState</span>(&#123;</span><br><span class="line">              <span class="attr">message</span>:<span class="string">&quot;Hello React&quot;</span></span><br><span class="line">          &#125;)</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      <span class="comment">//渲染内容 render方法</span></span><br><span class="line">      <span class="title function_">render</span>(<span class="params"></span>)&#123;</span><br><span class="line">          <span class="keyword">return</span>(</span><br><span class="line">              <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                  <span class="tag">&lt;<span class="name">h2</span>&gt;</span>&#123;this.state.message&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span>    </span></span><br><span class="line"><span class="language-xml">                  <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;this.btnClick&#125;</span>&gt;</span>修改<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">              <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">          )</span><br><span class="line">      &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> root = <span class="title class_">ReactDOM</span>.<span class="title function_">createRoot</span>(<span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&quot;#root&quot;</span>))</span><br><span class="line">  root.<span class="title function_">render</span>(<span class="language-xml"><span class="tag">&lt;<span class="name">App</span>/&gt;</span></span>)</span><br></pre></td></tr></table></figure>

<h2 id="4、生成代码片段"><a href="#4、生成代码片段" class="headerlink" title="4、生成代码片段"></a>4、生成代码片段</h2><ul>
<li>生成代码片段<ul>
<li><a target="_blank" rel="noopener" href="https://snippet-generator.app/%E5%9C%A8%E8%AF%A5%E7%BD%91%E7%AB%99%E4%B8%AD%E7%94%9F%E6%88%90%E4%BB%A3%E7%A0%81%E7%89%87%E6%AE%B5">https://snippet-generator.app/在该网站中生成代码片段</a></li>
<li>在VScode中配置代码片段</li>
</ul>
</li>
</ul>
<h1 id="二、JSX语法"><a href="#二、JSX语法" class="headerlink" title="二、JSX语法"></a>二、JSX语法</h1><h2 id="1、为什么React选择了JSX？"><a href="#1、为什么React选择了JSX？" class="headerlink" title="1、为什么React选择了JSX？"></a>1、为什么React选择了JSX？</h2><p><img src="https://s3-us-west-2.amazonaws.com/secure.notion-static.com/ab4e1159-7d4e-4276-aef4-0ddbbb6a17db/Untitled.png" alt="Untitled"></p>
<h2 id="2、书写规范"><a href="#2、书写规范" class="headerlink" title="2、书写规范"></a>2、书写规范</h2><p>只能有一个根元素；</p>
<p>jsx结构通常包裹一个（）；</p>
<h2 id="3、注释编写"><a href="#3、注释编写" class="headerlink" title="3、注释编写"></a>3、注释编写</h2><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;<span class="comment">/*JSX的注释写法*/</span>&#125;</span><br></pre></td></tr></table></figure>

<h2 id="4、插入内容"><a href="#4、插入内容" class="headerlink" title="4、插入内容"></a>4、插入内容</h2><ul>
<li><p>JSX嵌入变量作为子元素</p>
<ul>
<li><p>当变量是Number、String、Array类型时，可以直接显示。</p>
</li>
<li><p>当变量是null、undefined、Boolean类型时，内容为空。</p>
<ul>
<li>如果希望展示则需要转换成字符串。String（aaa）、bbb+’ ‘、ccc.toString()</li>
</ul>
</li>
<li><p>Object不能直接作为子元素进行显示。</p>
<ul>
<li><h2>{Object.keys(friend)[0]}</h2></li>
</ul>
</li>
<li><p>表达式</p>
</li>
<li><p>三元运算符</p>
</li>
<li><p>调用方法</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;ul&gt;&#123;<span class="variable language_">this</span>.<span class="title function_">getMovieEls</span>()&#125;&lt;/ul&gt;</span><br></pre></td></tr></table></figure>

<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">getMovieEls</span>(<span class="params"></span>)&#123;</span><br><span class="line">	...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
</ul>
<h2 id="5、绑定属性"><a href="#5、绑定属性" class="headerlink" title="5、绑定属性"></a>5、绑定属性</h2><ul>
<li><p>基本绑定</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">this</span>.<span class="property">state</span>=&#123;</span><br><span class="line">	<span class="attr">title</span>:<span class="string">&quot;hhh&quot;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span>()&#123;</span><br><span class="line">	<span class="keyword">const</span> &#123; title &#125; = <span class="variable language_">this</span>.<span class="property">state</span></span><br><span class="line">	<span class="keyword">return</span> (</span><br><span class="line">		&lt;div&gt;</span><br><span class="line">			&lt;h2 title=&#123;title&#125;&gt;Hello&lt;h2&gt;</span><br><span class="line">		&lt;div&gt;</span><br><span class="line">	)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>class绑定</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//1、写法一：字符串拼接</span></span><br><span class="line"><span class="keyword">const</span> className = &#123;<span class="string">`abc cbs <span class="subst">$&#123;isActive ? <span class="string">&#x27;active&#x27;</span>:<span class="string">&#x27;&#x27;</span>&#125;</span>`</span>&#125;<span class="comment">//模板字符串</span></span><br><span class="line"><span class="comment">//2、写法二：将所有class放到数组中</span></span><br><span class="line"><span class="keyword">const</span> classList = [<span class="string">&#x27;abc&#x27;</span>.<span class="string">&#x27;cbs&#x27;</span>]</span><br><span class="line"><span class="keyword">if</span>(isActive) classList.<span class="title function_">push</span>(<span class="string">&quot;active&quot;</span>)  <span class="comment">//此种方法会有逗号，引用时需要.join(&quot; &quot;)</span></span><br><span class="line"><span class="comment">//3、写法三：第三方库classnames</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>style绑定</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;h2 style=&#123;&#123;<span class="attr">color</span>:<span class="string">&quot;red&quot;</span>,<span class="attr">fontSize</span>:<span class="string">&quot;30px&quot;</span>&#125;&#125;&gt;哈哈&lt;<span class="regexp">/h2&gt;  /</span><span class="regexp">/里面括号是对象，外面括号是js语法</span></span><br><span class="line"><span class="regexp">----</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>this的三种绑定</p>
<ul>
<li><p>this四种绑定规则：</p>
<ul>
<li>默认绑定：独立执行foo（）</li>
<li>隐式绑定：被一个对象执行obj.foo() → obj</li>
<li>显示绑定：call&#x2F;apply&#x2F;bind</li>
<li>new绑定：new foo（）→创建一个新对象</li>
</ul>
</li>
<li><p>绑定方式一(bind)：（不推荐）</p>
<p>event会被最后一个传递</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">this</span>.<span class="property">btnClick</span>=<span class="variable language_">this</span>.<span class="property">btnClick</span>.<span class="title function_">bind</span>(<span class="variable language_">this</span>)</span><br><span class="line"></span><br><span class="line">btn2Click ()&#123;&#125;</span><br><span class="line">...</span><br><span class="line"></span><br><span class="line">&lt;button onClick=&#123;<span class="variable language_">this</span>.<span class="property">btn1Click</span>&#125;&gt;按钮<span class="number">1</span>&lt;/button&gt;</span><br></pre></td></tr></table></figure>
</li>
<li><p>绑定方式二(ES6 class fields)：（不推荐）</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">btn2Click = <span class="function">()=&gt;</span>&#123;&#125;</span><br><span class="line"></span><br><span class="line">&lt;button onClick=&#123;<span class="variable language_">this</span>.<span class="property">btn2Click</span>&#125;&gt;按钮<span class="number">2</span>&lt;/button&gt;</span><br></pre></td></tr></table></figure>
</li>
<li><p>绑定方式三(直接传入箭头函数)：</p>
<p>方便传递参数</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">btn2Click = <span class="function">()=&gt;</span>&#123;</span><br><span class="line">	<span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;btn3Click&quot;</span>,<span class="variable language_">this</span>)</span><br><span class="line">&#125;</span><br><span class="line">&lt;button onClick=&#123;<span class="function">()=&gt;</span><span class="variable language_">this</span>.<span class="title function_">btn3Click</span>()&#125;&gt;按钮<span class="number">3</span>&lt;/button&gt;</span><br><span class="line"><span class="comment">//此处是调用，是隐式绑定，所以上面的this指向实例</span></span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li><p>事件绑定</p>
<p>点击哪个，哪个变红</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><span class="line">&lt;!<span class="variable constant_">DOCTYPE</span> html&gt;</span><br><span class="line">&lt;html lang=&quot;en&quot;&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;meta charset=&quot;UTF-8&quot;&gt;</span><br><span class="line">    &lt;meta http-equiv=&quot;X-UA-Compatible&quot; content=&quot;IE=edge&quot;&gt;</span><br><span class="line">    &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt;</span><br><span class="line">    &lt;title&gt;Document&lt;/title&gt;</span><br><span class="line">    &lt;style&gt;</span><br><span class="line">        .active&#123;</span><br><span class="line">            color: red;</span><br><span class="line">        &#125;</span><br><span class="line">    &lt;/style&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">    &lt;div id=&quot;root&quot;&gt;&lt;/div&gt;</span><br><span class="line">    </span><br><span class="line">    &lt;script src=&quot;../lib/babel.js&quot;&gt;&lt;/script&gt;</span><br><span class="line">    &lt;script src=&quot;../lib/react.js&quot;&gt;&lt;/script&gt;</span><br><span class="line">    &lt;script src=&quot;../lib/react-dom.js&quot;&gt;&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">    &lt;script type=&quot;text/babel&quot;&gt;</span><br><span class="line">        </span><br><span class="line">        //1、定义App根组件</span><br><span class="line">        class App extends React.Component&#123;</span><br><span class="line">            constructor()&#123;</span><br><span class="line">                super()</span><br><span class="line">                this.state = &#123;</span><br><span class="line">                    movies:[&quot;星际穿越&quot;,&quot;穿普拉达的女王&quot;,&quot;楚门的世界&quot;],</span><br><span class="line">                    currentIndex:0</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            itemClick(index)&#123;</span><br><span class="line">                this.setState(&#123;</span><br><span class="line">                    currentIndex:index</span><br><span class="line">                &#125;)</span><br><span class="line">            &#125;</span><br><span class="line">          </span><br><span class="line">            render()&#123;</span><br><span class="line">                const &#123; movies,currentIndex &#125; = this.state</span><br><span class="line">                return(</span><br><span class="line">                    &lt;div&gt;</span><br><span class="line">                        &lt;ul&gt;</span><br><span class="line">                            &#123;</span><br><span class="line">                                movies.map((item,index)=&gt;&#123;</span><br><span class="line">                                return (</span><br><span class="line">                                    &lt;li </span><br><span class="line">                                    className=&#123; currentIndex === index?&#x27;active&#x27;:&#x27;&#x27; &#125;</span><br><span class="line">                                    key=&#123;item&#125;</span><br><span class="line">                                    onClick=&#123;()=&gt;this.itemClick(index)&#125;</span><br><span class="line">                                    &gt;</span><br><span class="line">                                    &#123;item&#125;</span><br><span class="line">                                    &lt;/li&gt;</span><br><span class="line">                                )</span><br><span class="line">                            &#125;)&#125;</span><br><span class="line">                        &lt;/ul&gt;</span><br><span class="line">                    &lt;/div&gt;</span><br><span class="line">                )</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        //2、创建root并且渲染App组件</span><br><span class="line">        const root = ReactDOM.createRoot(document.querySelector(&quot;#root&quot;))</span><br><span class="line">        root.render(&lt;App/&gt;)</span><br><span class="line">    &lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure></li>
</ul>
<h2 id="6、条件渲染"><a href="#6、条件渲染" class="headerlink" title="6、条件渲染"></a>6、条件渲染</h2><ul>
<li><p>方法一：根据条件给变量赋值不同的内容</p>
</li>
<li><p>方法二：三元运算符</p>
</li>
<li><p>方法三：逻辑与运算</p>
<p><strong>一般用在不确定有没有值的时候</strong></p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;div&gt;&#123; friend &amp;&amp; <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span>&#123;friend.name +&quot; &quot;+friend.desc&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span>&#125;&lt;/div&gt;</span><br></pre></td></tr></table></figure>
</li>
<li><p>类似v-show效果</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;h2 style=&#123;&#123;<span class="attr">display</span>:isShow?<span class="string">&#x27;block&#x27;</span>:<span class="string">&#x27;none&#x27;</span>&#125;&#125;&gt;hhh&lt;/h2&gt;</span><br></pre></td></tr></table></figure></li>
</ul>
<h2 id="7、列表渲染"><a href="#7、列表渲染" class="headerlink" title="7、列表渲染"></a>7、列表渲染</h2><p>使用map最多</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&lt;div className=<span class="string">&quot;list&quot;</span>&gt;</span><br><span class="line">&#123;</span><br><span class="line">	students.<span class="title function_">filter</span>(<span class="function"><span class="params">item</span> =&gt;</span> item.<span class="property">score</span>&gt;<span class="number">100</span>).<span class="title function_">slice</span>(<span class="number">0</span>,<span class="number">2</span>).<span class="title function_">map</span>(<span class="function"><span class="params">item</span>=&gt;</span>&#123;</span><br><span class="line">		<span class="keyword">return</span> (</span><br><span class="line">			<span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&quot;item&quot;</span> <span class="attr">key</span>=<span class="string">&#123;item.id&#125;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">				<span class="tag">&lt;<span class="name">h2</span>&gt;</span>学号：&#123;item.id&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">				<span class="tag">&lt;<span class="name">h2</span>&gt;</span>姓名：&#123;item.name&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">			<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">			)</span><br><span class="line">	&#125;)</span><br><span class="line">&#125;</span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></table></figure>

<h1 id="三、JSX本质原理"><a href="#三、JSX本质原理" class="headerlink" title="三、JSX本质原理"></a>三、JSX本质原理</h1><p><a target="_blank" rel="noopener" href="http://babeljs.io/repl/#?presets=react">http://babeljs.io/repl/#?presets=react</a></p>
<h1 id="四、购物车案例"><a href="#四、购物车案例" class="headerlink" title="四、购物车案例"></a>四、购物车案例</h1><ul>
<li>两种修改价格方式：</li>
</ul>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//方式一</span></span><br><span class="line"><span class="keyword">let</span> totalPrice = <span class="number">0</span></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> i=<span class="number">0</span>;i&lt;books.<span class="property">length</span>;i++)&#123;</span><br><span class="line">    <span class="keyword">const</span> book=books[i]</span><br><span class="line">    totalPrice+=book.<span class="property">price</span> * book.<span class="property">count</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//方式二</span></span><br><span class="line"><span class="keyword">const</span> totalPrice = books.<span class="title function_">reduce</span>(<span class="function">(<span class="params">preValue,item</span>)=&gt;</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> preValue+item.<span class="property">count</span>*item.<span class="property">price</span></span><br><span class="line">&#125;,<span class="number">0</span>)</span><br></pre></td></tr></table></figure>

<ul>
<li>如果需要频繁使用的函数可以另写一个</li>
</ul>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">formatPrice</span>(<span class="params">price</span>)&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;￥&quot;</span>+<span class="title class_">Number</span>(price).<span class="title function_">toFixed</span>(<span class="number">2</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>数据量加减按钮</li>
</ul>
<p>不要直接改变，先做一个浅拷贝再修改。加减逻辑相似可以整合。</p>
<p>**<code>...this.state.books</code><strong>就是将原来的</strong><code>this.state.books</code><strong>数组展开成一个新的数组，然后将这个新数组的所有元素拷贝到</strong><code>newBooks</code><strong>数组中。由于这是一个浅拷贝，所以</strong><code>newBooks</code><strong>和</strong><code>this.state.books</code>**指向的是不同的数组对象，但是它们包含的元素是相同的。这种方式可以避免对原数组的修改，从而更加安全地进行操作。</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">changeCount</span>(<span class="params">index,count</span>)&#123;</span><br><span class="line">      <span class="keyword">const</span> newBooks = [...<span class="variable language_">this</span>.<span class="property">state</span>.<span class="property">books</span>]</span><br><span class="line">      newBooks[index].<span class="property">count</span>+=count</span><br><span class="line">      <span class="variable language_">this</span>.<span class="title function_">setState</span>(&#123; <span class="attr">books</span>:newBooks &#125;)</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>删除商品</li>
</ul>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">removeItem</span>(<span class="params">index</span>)&#123;</span><br><span class="line">    <span class="keyword">const</span> newBooks = [...<span class="variable language_">this</span>.<span class="property">state</span>.<span class="property">books</span>]  </span><br><span class="line">    newBooks.<span class="title function_">splice</span>(index,<span class="number">1</span>)</span><br><span class="line">    <span class="variable language_">this</span>.<span class="title function_">setState</span>(&#123;<span class="attr">books</span>:newBooks&#125;)</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>当商品为空时</li>
</ul>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">renderBookList</span>(<span class="params"></span>)&#123;&#125;</span><br><span class="line"><span class="title function_">renderBookEmpty</span>(<span class="params"></span>)&#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span><span class="tag">&lt;<span class="name">h2</span>&gt;</span>购物车为空<span class="tag">&lt;/<span class="name">h2</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">            &#125;</span><br><span class="line"><span class="title function_">render</span>(<span class="params"></span>)&#123;</span><br><span class="line">          <span class="keyword">const</span> &#123; books &#125; = <span class="variable language_">this</span>.<span class="property">state</span></span><br><span class="line">          <span class="keyword">return</span> books.<span class="property">length</span>?<span class="variable language_">this</span>.<span class="title function_">renderBookList</span>():<span class="variable language_">this</span>.<span class="property">renderBookEmpty</span>       </span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>

<h1 id="五、脚手架"><a href="#五、脚手架" class="headerlink" title="五、脚手架"></a>五、脚手架</h1><p><img src="https://s3-us-west-2.amazonaws.com/secure.notion-static.com/62a24f00-4ed4-4a9a-8fc1-a2c7980a2077/Untitled.png" alt="Untitled"></p>
<p><img src="https://s3-us-west-2.amazonaws.com/secure.notion-static.com/68c3e4ac-14aa-469a-b7a4-fd448ff801af/Untitled.png" alt="Untitled"></p>
<p>创建：</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">create-react-app 项目名称 <span class="comment">//不能包含大写字母</span></span><br><span class="line"><span class="comment">//进入文件</span></span><br><span class="line">cd scaffold</span><br><span class="line"><span class="comment">//运行</span></span><br><span class="line">npm start</span><br></pre></td></tr></table></figure>

<h1 id="六、组件化开发-一"><a href="#六、组件化开发-一" class="headerlink" title="六、组件化开发(一)"></a>六、组件化开发(一)</h1><h2 id="1、组件化概念"><a href="#1、组件化概念" class="headerlink" title="1、组件化概念"></a>1、组件化概念</h2><p><img src="https://s3-us-west-2.amazonaws.com/secure.notion-static.com/3042034c-2291-4b91-8783-d4fd69c133c7/Untitled.png" alt="Untitled"></p>
<h2 id="2、类组件"><a href="#2、类组件" class="headerlink" title="2、类组件"></a>2、类组件</h2><ul>
<li><p>定义规则·</p>
<ul>
<li>组件名称是大写字符开头（无论是类组件还是函数组件）</li>
<li>继承自React.Component</li>
<li>类组件必须实现render函数</li>
</ul>
</li>
<li><p>导入</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//都行</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">React</span> <span class="keyword">from</span> <span class="string">&quot;react&quot;</span></span><br><span class="line"><span class="keyword">import</span> &#123;<span class="title class_">React</span>&#125; <span class="keyword">from</span> <span class="string">&quot;react&quot;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>render函数的返回值</p>
<p>1、 React元素：通过jsx编写的代码就会被编译成React.createElement</p>
<p>2、数组</p>
<p>3、字符串</p>
<p>4、布尔类型</p>
</li>
</ul>
<h2 id="3、函数组件"><a href="#3、函数组件" class="headerlink" title="3、函数组件"></a>3、函数组件</h2><ul>
<li><p>特点：</p>
<p>没有生命周期</p>
<p>this关键字不能指向组件实例，因为没有组件实例</p>
<p>没有内部状态（state）</p>
</li>
<li><p>定义函数组件</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span> <span class="title function_">App</span>(<span class="params"></span>)&#123;</span><br><span class="line">	<span class="keyword">return</span>(</span><br><span class="line">		<span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span>Hello World<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">	)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
<h2 id="4、生命周期"><a href="#4、生命周期" class="headerlink" title="4、生命周期"></a>4、生命周期</h2><p><img src="https://s3-us-west-2.amazonaws.com/secure.notion-static.com/b2f18e18-2875-4e84-9c2c-c8b16d2ab538/Untitled.png" alt="Untitled"></p>
<ul>
<li>Constructor<ul>
<li>如果不初始化state或者不进行方法绑定，则不需要react组件实现构造函数</li>
<li>它只做两件事：初始化state、为事件绑定实例this</li>
</ul>
</li>
<li>componentDidMount<ul>
<li>在挂在到DOM树中立即调用</li>
<li>依赖于DOM的操作可以在这里进行<ul>
<li>发送网络请求、添加订阅</li>
</ul>
</li>
</ul>
</li>
<li>componentDidUpdate<ul>
<li>更新后立即调用，首次渲染1不会执行该方法</li>
</ul>
</li>
<li>componentWillUnmount<ul>
<li>在组件卸载及销毁之前直接调用（隐藏显示）</li>
<li>执行取消订阅</li>
</ul>
</li>
<li>还有一些不常用的周期函数</li>
</ul>
<h2 id="5、组件通信"><a href="#5、组件通信" class="headerlink" title="5、组件通信"></a>5、组件通信</h2><ul>
<li><p>父传子</p>
<p>父</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">this</span>.<span class="property">state</span>=&#123;</span><br><span class="line">	<span class="attr">banners</span>:[<span class="string">&quot;1&quot;</span>,<span class="string">&quot;2&quot;</span>]</span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">render</span>(<span class="params"></span>)&#123;</span><br><span class="line"><span class="keyword">const</span> &#123; banners &#125;=<span class="variable language_">this</span>.<span class="property">state</span></span><br><span class="line"><span class="keyword">return</span>(</span><br><span class="line">		<span class="language-xml"><span class="tag">&lt;<span class="name">MainBanner</span> <span class="attr">banners</span>=<span class="string">&#123;banners&#125;/</span>&gt;</span></span></span><br><span class="line">	)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>子</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">////可以不写</span></span><br><span class="line"><span class="comment">//constructor(props)&#123;</span></span><br><span class="line"><span class="comment">//	super(props)</span></span><br><span class="line"><span class="comment">//&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="title function_">render</span>(<span class="params"></span>)&#123;</span><br><span class="line">	<span class="keyword">const</span> &#123;banners&#125;=<span class="variable language_">this</span>.<span class="property">props</span></span><br><span class="line">	<span class="keyword">return</span>(</span><br><span class="line">		<span class="language-xml"><span class="tag">&lt;<span class="name">h2</span>&gt;</span>&#123;banners&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span><br><span class="line">	)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>props类型限制</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">PropTypes</span> <span class="keyword">from</span> <span class="string">&quot;prop-types&quot;</span> <span class="comment">//包含默认的类型</span></span><br><span class="line"></span><br><span class="line"><span class="title class_">MainBanner</span>.<span class="property">propTypes</span>=&#123;</span><br><span class="line">	<span class="attr">banners</span>:<span class="title class_">PropTypes</span>.<span class="property">array</span>.<span class="property">isRequired</span>,</span><br><span class="line">	<span class="attr">title</span>:<span class="title class_">PropTypes</span>.<span class="property">string</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>子传父</p>
<p>子组件获取点击，利用props调用父组件中的函数，并且传递给父组件参数。而在父组件中被调用的这个函数被赋予真正执行的函数。</p>
<p>子</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">addCount</span>(<span class="params">count</span>)&#123;</span><br><span class="line">	<span class="variable language_">this</span>.<span class="property">props</span>.<span class="title function_">addClick</span>(count) <span class="comment">//调用addClick，并传递给他一个参数</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">render</span>(<span class="params"></span>)&#123;</span><br><span class="line">	<span class="keyword">return</span> (</span><br><span class="line">		<span class="language-xml"><span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;e</span> = <span class="string">this.addCount(1)&#125;</span>&gt;</span>+1<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line">	)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>父</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">changeCounter</span>(<span class="params">count</span>)&#123;</span><br><span class="line">	<span class="variable language_">this</span>.<span class="title function_">setState</span>(&#123;<span class="attr">counter</span>:<span class="variable language_">this</span>.<span class="property">state</span>.<span class="property">counter</span> + count&#125;)</span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">render</span>(<span class="params"></span>)&#123;</span><br><span class="line">	<span class="keyword">return</span>(</span><br><span class="line">		<span class="language-xml"><span class="tag">&lt;<span class="name">AddCounter</span> <span class="attr">addClick</span>=<span class="string">&#123;(count)</span>=&gt;</span>this.changeCounter(count)&#125;/&gt;</span></span><br><span class="line">		<span class="comment">//把子组件的函数传递给addClick，（count）是传进来的参数</span></span><br><span class="line">	)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
<h2 id="6、插槽实现"><a href="#6、插槽实现" class="headerlink" title="6、插槽实现"></a>6、插槽实现</h2><ul>
<li><p>方案一：组件的children子元素</p>
<p>父</p>
<p>被放到this.props.children中。如果这里是多个，则是一个数组里面是react元素。</p>
<p>如果是只有一个则就是该react元素，不在数组中</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">render</span>(<span class="params"></span>)&#123;</span><br><span class="line">	<span class="keyword">return</span>(</span><br><span class="line">		<span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">			<span class="tag">&lt;<span class="name">NavBar</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">				<span class="tag">&lt;<span class="name">button</span>&gt;</span>按钮<span class="tag">&lt;/<span class="name">button</span>&gt;</span>    </span></span><br><span class="line"><span class="language-xml">				<span class="tag">&lt;<span class="name">h2</span>&gt;</span>标题<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">				<span class="tag">&lt;<span class="name">i</span>&gt;</span>文字<span class="tag">&lt;/<span class="name">i</span>&gt;</span>   </span></span><br><span class="line"><span class="language-xml">			<span class="tag">&lt;/<span class="name">NavBar</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">		<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">	)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>子</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">render</span>(<span class="params"></span>)&#123;</span><br><span class="line">	<span class="keyword">const</span> &#123; children &#125; = <span class="variable language_">this</span>.<span class="property">props</span></span><br><span class="line">	<span class="keyword">return</span>(</span><br><span class="line">		<span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&#x27;nav-bar&#x27;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">			<span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&quot;left&quot;</span>&gt;</span>&#123;children[0]&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">			<span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&quot;center&quot;</span>&gt;</span>&#123;children[1]&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">			<span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&quot;right&quot;</span>&gt;</span>&#123;children[2]&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">		<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">	)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>*方案二：props属性传递React元素</p>
</li>
</ul>
<p>父</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;<span class="title class_">NavBarTwo</span></span><br><span class="line">	leftSlot=&#123;<span class="language-xml"><span class="tag">&lt;<span class="name">button</span>&gt;</span><span class="tag">&lt;/<span class="name">button</span>&gt;</span></span>&#125;</span><br><span class="line">	centerSlot=&#123;<span class="language-xml"><span class="tag">&lt;<span class="name">h2</span>&gt;</span><span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span>&#125;</span><br><span class="line">	rightSlot=&#123;<span class="language-xml"><span class="tag">&lt;<span class="name">i</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span></span>&#125;</span><br><span class="line">/&gt;</span><br></pre></td></tr></table></figure>

<p>子</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">render</span>(<span class="params"></span>)&#123;</span><br><span class="line">	<span class="keyword">const</span>&#123; leftSlot,centerSlot,rightSlot &#125; = <span class="variable language_">this</span>.<span class="property">props</span></span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span>(</span><br><span class="line">		<span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&#x27;nav-bar&#x27;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">			<span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&quot;left&quot;</span>&gt;</span>&#123;leftSlot&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">			<span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&quot;center&quot;</span>&gt;</span>&#123;centerSlot&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">			<span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&quot;right&quot;</span>&gt;</span>&#123;rightSlot&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">		<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">	)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="7、非父子组件通信"><a href="#7、非父子组件通信" class="headerlink" title="7、非父子组件通信"></a>7、非父子组件通信</h2><h3 id="1、Context-用的不多"><a href="#1、Context-用的不多" class="headerlink" title="1、Context  用的不多"></a>1、Context  用的不多</h3><p>父（Provider）</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//1、创建上下文context</span></span><br><span class="line"><span class="keyword">const</span> <span class="title class_">ThemeContext</span> = <span class="title class_">React</span>.<span class="title function_">createContext</span>()</span><br><span class="line"><span class="comment">//2、给谁共享数据，就用&lt;ThemeContext.Provider&gt;把谁包起来</span></span><br><span class="line">&lt;<span class="title class_">ThemeContext</span>.<span class="property">Provider</span> value=&#123;&#123;<span class="attr">color</span>:<span class="string">&quot;red&quot;</span>,<span class="attr">size</span>:<span class="string">&quot;30&quot;</span>&#125;&#125;&gt;</span><br><span class="line">	<span class="language-xml"><span class="tag">&lt;<span class="name">Home</span> &#123;<span class="attr">...info</span>&#125;&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">ThemeContext.Provider</span>&gt;</span></span></span><br></pre></td></tr></table></figure>

<p>子</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title class_">ThemeContext</span> = <span class="title class_">React</span>.<span class="title function_">createContext</span>() <span class="comment">//可以单独写在一个文件</span></span><br><span class="line"><span class="comment">//4、获取数据使用数据</span></span><br><span class="line"><span class="title function_">render</span>(<span class="params"></span>)&#123;</span><br><span class="line">	<span class="keyword">return</span>(</span><br><span class="line">		<span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span>HomeInfo:&#123;this.context.color&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">	)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//3、设置组件的contextTypre类型为某一个context</span></span><br><span class="line"><span class="title class_">HomeInfo</span>.<span class="property">contextType</span> = <span class="title class_">ThemeContext</span></span><br></pre></td></tr></table></figure>

<ul>
<li>函数式组件使用context,可以在函数式组件里使用，也用于传递多个（Consumer）</li>
</ul>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">return</span> &lt;div&gt;</span><br><span class="line">	&#123;</span><br><span class="line">	&lt;ThemeContext.Consumer&gt;</span><br><span class="line">		&#123;</span><br><span class="line">			value =&gt; &#123;</span><br><span class="line">				return &lt;h2&gt;theme:&#123;value.color&#125;&lt;/h2&gt;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	&lt;ThemeContext.Consumer&gt;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></table></figure>

<h3 id="2、事件总线"><a href="#2、事件总线" class="headerlink" title="2、事件总线"></a>2、事件总线</h3><p>创建事件总线</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">HYEventBus</span> &#125; <span class="keyword">from</span> <span class="string">&quot;hy-event-store&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> eventBus = <span class="keyword">new</span> <span class="title class_">HYEventBus</span>()</span><br><span class="line"></span><br><span class="line">eventBus.<span class="title function_">emit</span>(<span class="string">&quot;bannerPrev&quot;</span>,<span class="string">&quot;1&quot;</span>，<span class="string">&quot;2&quot;</span>，<span class="string">&quot;3&quot;</span>)<span class="comment">//发出事件bannerPrev   </span></span><br></pre></td></tr></table></figure>

<p>在任意一个组件监听</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">引入eventBus</span><br><span class="line">eventBus.<span class="title function_">on</span>(<span class="string">&quot;bannerPrev&quot;</span>,<span class="function">()=&gt;</span>&#123;&#125;)  <span class="comment">//监听事件</span></span><br><span class="line"></span><br><span class="line">eventBus.<span class="title function_">off</span>(<span class="string">&quot;bannerPrev&quot;</span>,<span class="function">()=&gt;</span>&#123;&#125;) <span class="comment">//取消监听</span></span><br></pre></td></tr></table></figure>

<h2 id="8、setState的同步和异步"><a href="#8、setState的同步和异步" class="headerlink" title="8、setState的同步和异步"></a>8、setState的同步和异步</h2><ul>
<li><p>vue和react对于数据的管理：</p>
<p>vue通过数据劫持，一旦改变重新调用render函数</p>
<p>react中一旦setState被调用就会执行render。</p>
</li>
<li><p>setState更多用法</p>
<ul>
<li><p>1、基本使用</p>
<ul>
<li>注意：触发setState时进行的是合并，而不是替换</li>
</ul>
</li>
<li><p>2、setState可以传入一个回调函数</p>
<ul>
<li>好处一：编写一些对新的state处理逻辑</li>
<li>好处二：可获取之前state和props值</li>
</ul>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">this</span>.<span class="title function_">setState</span>(<span class="function">(<span class="params">state,props</span>)=&gt;</span>&#123;  </span><br><span class="line">	<span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">sate</span>.<span class="property">message</span>,<span class="variable language_">this</span>.<span class="property">props</span>)</span><br><span class="line">	<span class="keyword">return</span>&#123;</span><br><span class="line">		<span class="attr">message</span>:<span class="string">&quot;你好啊&quot;</span></span><br><span class="line">	&#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
</li>
<li><p>3、setState在React的事件处理中是一个异步调用</p>
<ul>
<li><p>*为何异步调用？其中一个作者回答过</p>
<p><img src="https://s3-us-west-2.amazonaws.com/secure.notion-static.com/2165eb8e-a00e-4e88-818b-e0a15f2c793b/Untitled.png" alt="Untitled"></p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">this</span>.<span class="title function_">setState</span>(&#123;<span class="attr">message</span>:<span class="string">&quot;你好啊&quot;</span>&#125;,<span class="function">()=&gt;</span>&#123;</span><br><span class="line">	<span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;++++:&quot;</span>,<span class="variable language_">this</span>.<span class="property">state</span>.<span class="property">message</span>)  <span class="comment">//同步之后再调用这个函数</span></span><br><span class="line">&#125;)</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;---:&quot;</span>,<span class="variable language_">this</span>.<span class="property">state</span>.<span class="property">message</span>)  <span class="comment">//可能还是之前的值</span></span><br></pre></td></tr></table></figure>

<p><img src="https://s3-us-west-2.amazonaws.com/secure.notion-static.com/85bd116e-4ddd-4a78-99c2-7335bdd0b6a0/Untitled.png" alt="Untitled"></p>
</li>
</ul>
</li>
</ul>
</li>
<li><p>React18以前setState</p>
<ul>
<li>在组件生命周期或React合成事件中，setState是异步</li>
<li>在setTimeout或原生dom事件中，setState是同步</li>
<li>Rreact18之后都变成了批处理，都是异步</li>
</ul>
</li>
<li><p>如果想同步操作</p>
</li>
</ul>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; flushSync &#125; <span class="keyword">from</span> <span class="string">&#x27;react-dom&#x27;</span></span><br><span class="line"><span class="title function_">flushSync</span>(<span class="function">()=&gt;</span>&#123;</span><br><span class="line">	<span class="variable language_">this</span>.<span class="title function_">setState</span>(&#123;<span class="attr">message</span>:<span class="string">&quot;你好啊&quot;</span>&#125;)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h1 id="七、组件化开发-二-高级"><a href="#七、组件化开发-二-高级" class="headerlink" title="七、组件化开发(二)高级"></a>七、组件化开发(二)高级</h1><p><img src="https://s3-us-west-2.amazonaws.com/secure.notion-static.com/b894cd0f-e9bc-42dd-84d6-745a8cf197b2/Untitled.png" alt="Untitled"></p>
<p><img src="https://s3-us-west-2.amazonaws.com/secure.notion-static.com/145eaf14-ee1b-4b7d-a18e-80309da1986b/Untitled.png" alt="Untitled"></p>
<h2 id="1、React性能的优化"><a href="#1、React性能的优化" class="headerlink" title="1、React性能的优化"></a>1、React性能的优化</h2><ul>
<li>diff算法<ul>
<li>同层节点之间相互比较，不会夸节点</li>
<li>不同类型的节点，产生不同的树结构</li>
<li>通过key来指定哪些节点在不同的渲染下保持稳定</li>
</ul>
</li>
<li>key<ul>
<li>在最后位置插入数据有无key意义不大</li>
<li>key应该是唯一的</li>
<li>用index作为key对性能没有优化</li>
</ul>
</li>
</ul>
<h2 id="2、render优化"><a href="#2、render优化" class="headerlink" title="2、render优化"></a>2、render优化</h2><p><img src="https://prod-files-secure.s3.us-west-2.amazonaws.com/32bdd7fd-399f-45ed-a0fd-14ee3c6cf977/1b38a545-d5a2-41a9-9ef9-aceb154e53a1/Untitled.png" alt="Untitled"></p>
<ul>
<li><p>shouldComponentUpdate生命周期方法  <strong>(SCU优化)</strong></p>
<ul>
<li><p>该方法有两个参数：</p>
<p><em><strong>nextProps，newState</strong></em></p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">shouldComponentUpdate</span>(<span class="params">newProps,nextState</span>)&#123;</span><br><span class="line">	<span class="keyword">if</span>(<span class="variable language_">this</span>.<span class="property">props</span>.<span class="property">message</span> !== newProps.<span class="property">message</span>)&#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">	&#125;</span><br><span class="line"><span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li><p>PureComponent</p>
<p>自动实现优化</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">React</span>,&#123; <span class="title class_">PureComponent</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">class</span> <span class="title class_">App</span> <span class="keyword">extends</span> <span class="title class_ inherited__">PureComponent</span>&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>memo</p>
<p>针对函数组件的优化</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;memo&#125; <span class="keyword">from</span> <span class="string">&quot;react&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title class_">Profile</span> = <span class="title function_">memo</span>(<span class="keyword">function</span>(<span class="params">props</span>)&#123;</span><br><span class="line">	<span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">h2</span>&gt;</span>Profile:&#123;props.message&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">Profile</span></span><br></pre></td></tr></table></figure></li>
</ul>
<h2 id="3、State数据保持不可变性"><a href="#3、State数据保持不可变性" class="headerlink" title="3、State数据保持不可变性"></a>3、State数据保持不可变性</h2><p>不可以直接修改state中的数据，在purcomponent中不能引起重新渲染，因为进行的是浅层比较。</p>
<p>需要重新复制一份。</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> books = [...<span class="variable language_">this</span>.<span class="property">state</span>.<span class="property">books</span>]</span><br></pre></td></tr></table></figure>

<h2 id="4、Ref获取dom操作"><a href="#4、Ref获取dom操作" class="headerlink" title="4、Ref获取dom操作"></a>4、Ref获取dom操作</h2><p>1、方式一：在React元素上绑定一个ref字符串</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">React</span>, &#123;<span class="title class_">PureComponent</span>&#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">class</span> <span class="title class_">App</span> <span class="keyword">extends</span> <span class="title class_ inherited__">PureComponent</span>&#123;</span><br><span class="line">	</span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">getNativeDOM</span>(<span class="params"></span>)&#123;</span><br><span class="line">		<span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">refs</span>.<span class="property">why</span>)  <span class="comment">//1、不推荐使用</span></span><br><span class="line">	&#125;</span><br><span class="line"><span class="title function_">render</span>(<span class="params"></span>)&#123;</span><br><span class="line">	<span class="keyword">return</span>(</span><br><span class="line">	<span class="language-xml"><span class="tag">&lt;<span class="name">h2</span> <span class="attr">ref</span>=<span class="string">&quot;why&quot;</span>&gt;</span> Hello world<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span><br><span class="line">	<span class="language-xml"><span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;e</span>=&gt;</span>this.getNativeDOM()&#125;&gt;获取DOM<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line">	)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>2、方式二：提前创建一个ref对象，将创建的对象绑定到元素上</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">React</span>, &#123;<span class="title class_">PureComponent</span> , createRef&#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>  <span class="comment">//0、引入createRef</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">class</span> <span class="title class_">App</span> <span class="keyword">extends</span> <span class="title class_ inherited__">PureComponent</span>&#123;</span><br><span class="line">	<span class="title function_">constructor</span>(<span class="params"></span>)&#123;</span><br><span class="line">		<span class="variable language_">super</span>()</span><br><span class="line">		<span class="variable language_">this</span>.<span class="property">state</span> = &#123;&#125;</span><br><span class="line"></span><br><span class="line">		<span class="variable language_">this</span>.<span class="property">titleRef</span> = <span class="title function_">createRef</span>()  <span class="comment">//1、提前创建一个ref</span></span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">getNativeDOM</span>(<span class="params"></span>)&#123;</span><br><span class="line">		<span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">titleRef</span>.<span class="property">current</span>)   <span class="comment">//3、使用</span></span><br><span class="line">	&#125;</span><br><span class="line"><span class="title function_">render</span>(<span class="params"></span>)&#123;</span><br><span class="line">	<span class="keyword">return</span>(</span><br><span class="line">	<span class="language-xml"><span class="tag">&lt;<span class="name">h2</span> <span class="attr">ref</span>=<span class="string">&#123;this.titleRef&#125;</span>&gt;</span> Hello world<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span>    <span class="comment">//2、绑定</span></span><br><span class="line">	<span class="language-xml"><span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;e</span>=&gt;</span>this.getNativeDOM()&#125;&gt;获取DOM<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line">	)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>3、方式三：传入回调函数，在对应元素被渲染之后，回到函数被执行，并且将元素传入</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">React</span>, &#123;<span class="title class_">PureComponent</span>&#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">class</span> <span class="title class_">App</span> <span class="keyword">extends</span> <span class="title class_ inherited__">PureComponent</span>&#123;</span><br><span class="line">	<span class="title function_">constructor</span>(<span class="params"></span>)&#123;</span><br><span class="line">		<span class="variable language_">super</span>()</span><br><span class="line">		<span class="variable language_">this</span>.<span class="property">state</span> = &#123;&#125;</span><br><span class="line"></span><br><span class="line">		<span class="variable language_">this</span>.<span class="property">titleEl</span> = <span class="literal">null</span>    </span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">getNativeDOM</span>(<span class="params"></span>)&#123;</span><br><span class="line">		<span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">titleEl</span>)   </span><br><span class="line"><span class="title function_">render</span>(<span class="params"></span>)&#123;</span><br><span class="line">	<span class="keyword">return</span>(</span><br><span class="line">	<span class="language-xml"><span class="tag">&lt;<span class="name">h2</span> <span class="attr">ref</span>=<span class="string">&#123;el</span> =&gt;</span> this.titleEl=el&#125;&gt; Hello world<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span>    <span class="comment">//1、传入函数</span></span><br><span class="line">	<span class="language-xml"><span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;e</span>=&gt;</span>this.getNativeDOM()&#125;&gt;获取DOM<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line">	)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="5、Ref获取组件"><a href="#5、Ref获取组件" class="headerlink" title="5、Ref获取组件"></a>5、Ref获取组件</h2><ul>
<li>ref获取<strong>类组件</strong>的方法同获取dom的方法二，可以拿到组件的实例</li>
<li>ref获取函数<strong>组件</strong>  使用  <strong>forwardRef</strong></li>
</ul>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">React</span>, &#123;<span class="title class_">PureComponent</span> , **forwardRef**&#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>  <span class="comment">//0、引入**forwardRef**</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title class_">HelloWorld</span> = <span class="title function_">forwardRef</span>(<span class="keyword">function</span>(<span class="params">props,ref</span>)&#123;   <span class="comment">//3、在这里会多一个ref</span></span><br><span class="line">	<span class="keyword">return</span>(</span><br><span class="line">		<span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">			<span class="tag">&lt;<span class="name">h1</span> <span class="attr">ref</span>=<span class="string">&#123;ref&#125;</span>&gt;</span>Hello World<span class="tag">&lt;/<span class="name">h1</span>&gt;</span>   //4、实现绑定</span></span><br><span class="line"><span class="language-xml">			<span class="tag">&lt;<span class="name">p</span>&gt;</span>jjj<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">		<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">	)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">class</span> <span class="title class_">App</span> <span class="keyword">extends</span> <span class="title class_ inherited__">PureComponent</span>&#123;</span><br><span class="line">	<span class="title function_">constructor</span>(<span class="params"></span>)&#123;</span><br><span class="line">		<span class="variable language_">super</span>()</span><br><span class="line"></span><br><span class="line">		<span class="variable language_">this</span>.<span class="property">hwRef</span> = <span class="title function_">createRef</span>()  <span class="comment">//1、提前创建一个ref</span></span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">getNativeDOM</span>(<span class="params"></span>)&#123;</span><br><span class="line">		<span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">titleRef</span>.<span class="property">current</span>)   <span class="comment">//3、使用</span></span><br><span class="line">	&#125;</span><br><span class="line"><span class="title function_">render</span>(<span class="params"></span>)&#123;</span><br><span class="line">	<span class="keyword">return</span>(</span><br><span class="line">	<span class="language-xml"><span class="tag">&lt;<span class="name">HelloWorld</span> <span class="attr">ref</span>=<span class="string">&#123;this.hwRef&#125;</span>&gt;</span> Hello world<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span>    <span class="comment">//2、绑定</span></span><br><span class="line">	<span class="language-xml"><span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;e</span>=&gt;</span>this.getNativeDOM()&#125;&gt;获取DOM<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line">	)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="6、受控组件和非受控组件"><a href="#6、受控组件和非受控组件" class="headerlink" title="6、受控组件和非受控组件"></a>6、受控组件和非受控组件</h2><p>受控组件</p>
<ul>
<li>input是非受控组件，一旦绑定初始值，就会变成受控组件，如果此时不绑定onChange监听值的改变，就会无法输入，只有绑定了onChange函数调用响应函数，利用setState改变值，引起input元素值的改变，输入内容才会改变，依然是受控组件。</li>
</ul>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">React</span>, &#123;<span class="title class_">PureComponent</span> , **forwardRef**&#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>  <span class="comment">//0、引入**forwardRef**</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">class</span> <span class="title class_">App</span> <span class="keyword">extends</span> <span class="title class_ inherited__">PureComponent</span>&#123;</span><br><span class="line">	<span class="title function_">constructor</span>(<span class="params"></span>)&#123;</span><br><span class="line">		<span class="variable language_">super</span>()</span><br><span class="line">		<span class="variable language_">this</span>.<span class="property">state</span>=&#123;</span><br><span class="line">			<span class="attr">username</span>:<span class="string">&quot;coder&quot;</span></span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="title function_">inputChange</span>(<span class="params">event</span>)&#123;</span><br><span class="line">		<span class="variable language_">this</span>.<span class="title function_">setState</span>(&#123;<span class="attr">username</span>:event.<span class="property">target</span>.<span class="property">value</span>&#125;)</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title function_">render</span>(<span class="params"></span>)&#123;</span><br><span class="line">	<span class="keyword">const</span> &#123; username &#125; = <span class="variable language_">this</span>.<span class="property">state</span></span><br><span class="line">	<span class="keyword">return</span>(</span><br><span class="line">		&#123;<span class="comment">/*非受控组件*/</span>&#125;</span><br><span class="line">		&lt;input type=<span class="string">&quot;text&quot;</span>/&gt;</span><br><span class="line">		&#123;<span class="comment">/*受控组件*/</span>&#125;</span><br><span class="line">		&lt;input type=<span class="string">&quot;text&quot;</span> value=&#123;username&#125; onChange=&#123;<span class="function"><span class="params">e</span> =&gt;</span> <span class="variable language_">this</span>.<span class="title function_">inputChange</span>(e)&#125;/&gt;</span><br><span class="line">	)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>一般都会自己提交而非默认提交</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">class</span> <span class="title class_">App</span> <span class="keyword">extends</span> <span class="title class_ inherited__">PureComponent</span>&#123;</span><br><span class="line">	<span class="title function_">handleSubmitClick</span>(<span class="params">event</span>)&#123;</span><br><span class="line">		event.<span class="title function_">preventDefault</span>()   <span class="comment">//阻止表单默认行为，刷新</span></span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="title function_">reder</span>(<span class="params"></span>)&#123;</span><br><span class="line">		<span class="keyword">return</span>(</span><br><span class="line">			&lt;form onSubmit=&#123;e=&gt;this.handleSubmitClick(e)&#125;&gt;   //提交表单会触发onSubmit</span><br><span class="line">				&lt;input type=&#x27;text&#x27; name=&#x27;username&#x27;&gt;</span><br><span class="line">				&lt;button type=&#x27;submit&#x27;&gt;注册&lt;/button&gt;</span><br><span class="line">		)</span><br><span class="line">	&#125;</span><br><span class="line">&#125;	</span><br></pre></td></tr></table></figure>

<p><strong>event.target</strong>可以拿到当前的元素</p>
<ul>
<li><p>Checkbox单选</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">class</span> <span class="title class_">App</span> <span class="keyword">extends</span> <span class="title class_ inherited__">PureComponent</span>&#123;</span><br><span class="line">	<span class="title function_">handleAgreeChange</span>(<span class="params">event</span>)&#123;</span><br><span class="line">		<span class="variable language_">this</span>/<span class="title function_">setState</span>(&#123;<span class="attr">isAgree</span>:event.<span class="property">target</span>.<span class="property">checked</span>&#125;)   <span class="comment">//注意是checked</span></span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="title function_">reder</span>(<span class="params"></span>)&#123;</span><br><span class="line">		<span class="keyword">return</span>(</span><br><span class="line">			<span class="language-xml"><span class="tag">&lt;<span class="name">label</span> <span class="attr">htmlFor</span>=<span class="string">&#x27;agree&#x27;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">				<span class="tag">&lt;<span class="name">input</span> </span></span></span><br><span class="line"><span class="tag"><span class="language-xml">					<span class="attr">id</span>=<span class="string">&#x27;agree&#x27;</span>    //<span class="attr">与label同名</span>，<span class="attr">选中内容前面的小框框就会被选中</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">					<span class="attr">type</span>=<span class="string">&#x27;checkbox&#x27;</span>  //<span class="attr">类型</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">					<span class="attr">checked</span>=<span class="string">&#123;isAgree&#125;</span>  //<span class="attr">注意是</span>：<span class="attr">checked而非value</span>。  <span class="attr">变成受控组件</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">					<span class="attr">onChange</span>=<span class="string">&#123;e</span> =&gt;</span> this.handleAgreeChange(e)&#125;  </span></span><br><span class="line"><span class="language-xml">				/&gt;</span></span><br><span class="line"><span class="language-xml">				同意协议</span></span><br><span class="line"><span class="language-xml">			<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span></span><br><span class="line">		)</span><br><span class="line">	&#125;</span><br><span class="line">&#125;	</span><br></pre></td></tr></table></figure>
</li>
<li><p>Checkbox多选</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">class</span> <span class="title class_">App</span> <span class="keyword">extends</span> <span class="title class_ inherited__">PureComponent</span>&#123;</span><br><span class="line">	<span class="title function_">constructor</span>(<span class="params"></span>)&#123;</span><br><span class="line">		<span class="variable language_">super</span>()</span><br><span class="line">		<span class="variable language_">this</span>.<span class="property">state</span> = &#123;</span><br><span class="line">			<span class="attr">hobbies</span>:[</span><br><span class="line">					&#123;<span class="attr">value</span>:<span class="string">&#x27;sing&#x27;</span>,<span class="attr">text</span>:<span class="string">&#x27;唱&#x27;</span>，<span class="attr">isChecked</span>:<span class="literal">false</span>&#125;,</span><br><span class="line">					&#123;<span class="attr">value</span>:<span class="string">&#x27;dance&#x27;</span>,<span class="attr">text</span>:<span class="string">&#x27;跳&#x27;</span>，<span class="attr">isChecked</span>:<span class="literal">false</span>&#125;,</span><br><span class="line">					&#123;<span class="attr">value</span>:<span class="string">&#x27;rap&#x27;</span>,<span class="attr">text</span>:<span class="string">&#x27;rap&#x27;</span>，<span class="attr">isChecked</span>:<span class="literal">false</span>&#125;,</span><br><span class="line">			]</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">handleHobbiesChange</span>(<span class="params">event,index</span>)&#123;</span><br><span class="line">	<span class="keyword">const</span> hobbies = [...<span class="variable language_">this</span>.<span class="property">state</span>.<span class="property">hobbies</span>]</span><br><span class="line">	hobbies[index].<span class="property">isChecked</span> = event.<span class="property">target</span>.<span class="property">checked</span></span><br><span class="line">	<span class="variable language_">this</span>.<span class="title function_">setState</span>(&#123;hobbies&#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title function_">render</span>(<span class="params"></span>)&#123;</span><br><span class="line">		<span class="keyword">return</span>(</span><br><span class="line">			<span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">				您的爱好：</span></span><br><span class="line"><span class="language-xml">				&#123;</span></span><br><span class="line"><span class="language-xml">					hobbies.map((item,index) =&gt;&#123;</span></span><br><span class="line"><span class="language-xml">						return(</span></span><br><span class="line"><span class="language-xml">							<span class="tag">&lt;<span class="name">label</span> <span class="attr">htmlFor</span>=<span class="string">&#123;item.value&#125;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">								<span class="tag">&lt;<span class="name">input</span> </span></span></span><br><span class="line"><span class="tag"><span class="language-xml">									<span class="attr">type</span>=<span class="string">&#x27;checkbox&#x27;</span> </span></span></span><br><span class="line"><span class="tag"><span class="language-xml">									<span class="attr">id</span>=<span class="string">&#123;item.value&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">									<span class="attr">checked</span>=<span class="string">&#123;item.isChecked&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">									<span class="attr">onChange</span>=<span class="string">&#123;e</span>=&gt;</span>this.handleHobbiesChange(e,index)&#125;</span></span><br><span class="line"><span class="language-xml">								/&gt;</span></span><br><span class="line"><span class="language-xml">									&#123;item.text&#125;</span></span><br><span class="line"><span class="language-xml">							<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">						)</span></span><br><span class="line"><span class="language-xml">					&#125;)</span></span><br><span class="line"><span class="language-xml">				&#125;</span></span><br><span class="line"><span class="language-xml">			<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">			</span><br><span class="line">&#125;	</span><br></pre></td></tr></table></figure></li>
</ul>
<p>非受控组件</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;input type=<span class="string">&quot;text&quot;</span> defaultValue=&#123;intro&#125;&gt;<span class="comment">//使用defaultValue设置默认值还是非受控组件</span></span><br></pre></td></tr></table></figure>

<h2 id="7、高阶组件"><a href="#7、高阶组件" class="headerlink" title="7、高阶组件"></a>7、高阶组件</h2><p><strong>高阶函数</strong>：如果一个函数的参数或返回值是函数，则这个函数就称为高阶函数</p>
<p><strong>高级组件</strong>：高阶组件本身不是一个组件，而是一个函数；这个函数的参数是一个组件，返回值也是一个组件</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">React</span>,&#123;<span class="title class_">PureComponent</span>&#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span></span><br><span class="line"><span class="comment">//定义一个高阶组件</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">hoc</span>(<span class="params">CPN</span>)&#123;</span><br><span class="line"><span class="comment">//定义类组件，也可以是函数组件</span></span><br><span class="line">	<span class="keyword">class</span> <span class="title class_">NewCpn</span> <span class="keyword">extends</span> <span class="title class_ inherited__">PureComponent</span>&#123;</span><br><span class="line">		<span class="title function_">render</span>(<span class="params"></span>)&#123;</span><br><span class="line">			<span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">Cpn</span>/&gt;</span></span></span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">HelloWorld</span> <span class="keyword">extends</span> <span class="title class_ inherited__">PureComponent</span>&#123;</span><br><span class="line">	<span class="title function_">render</span>(<span class="params"></span>)&#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>Hello<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title class_">HelloWorldHOC</span> = <span class="title function_">hoc</span>(<span class="title class_">HelloWorld</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">class</span> <span class="title class_">App</span> <span class="keyword">extends</span> <span class="title class_ inherited__">PureComponent</span>&#123;</span><br><span class="line">	<span class="title function_">render</span>(<span class="params"></span>)&#123;</span><br><span class="line">		<span class="keyword">return</span>(</span><br><span class="line">				<span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span>&lt; HelloWorldHOC/&gt;</span>&lt;/div&gt;</span><br><span class="line">		)</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line">这样可以进行拦截</span><br></pre></td></tr></table></figure>

<ul>
<li>高阶组件应用1</li>
</ul>
<p>props增强传给多个组件更快</p>
<p><img src="https://s3-us-west-2.amazonaws.com/secure.notion-static.com/2adbd9e9-4106-464d-a1b7-c6a074653a83/Untitled.png" alt="Untitled"></p>
<ul>
<li><p>高阶组件的应用2</p>
<p>Context</p>
</li>
</ul>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">class</span> <span class="title class_">product</span> <span class="keyword">extends</span> <span class="title class_ inherited__">PureComponent</span>&#123;</span><br><span class="line">	<span class="title function_">render</span>(<span class="params"></span>)&#123;</span><br><span class="line">		<span class="keyword">const</span> &#123;color,size&#125;=<span class="variable language_">this</span>.<span class="property">props</span></span><br><span class="line">		<span class="keyword">return</span>(</span><br><span class="line">			<span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">				<span class="tag">&lt;<span class="name">h2</span>&gt;</span>Product:&#123;color&#125;-&#123;size&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">			<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">		)</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title function_">withTheme</span>(<span class="title class_">Product</span>)  <span class="comment">//导出之前进行增强 包裹</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">ThemeContext</span> <span class="keyword">from</span> <span class="string">&quot;../context/theme_context&quot;</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">withTheme</span>(<span class="params">OriginComponment</span>)&#123;</span><br><span class="line">	<span class="keyword">return</span> <span class="function">(<span class="params">props</span>) =&gt;</span> &#123;</span><br><span class="line">		<span class="language-xml"><span class="tag">&lt;<span class="name">ThemeContext.Consumer</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">		&#123;</span></span><br><span class="line"><span class="language-xml">			value =&gt;&#123;</span></span><br><span class="line"><span class="language-xml">				return <span class="tag">&lt;<span class="name">OriginComponment</span> &#123;<span class="attr">...value</span>&#125; &#123;<span class="attr">...props</span>&#125;/&gt;</span></span></span><br><span class="line"><span class="language-xml">			&#125;</span></span><br><span class="line"><span class="language-xml">		&#125;</span></span><br><span class="line"><span class="language-xml">		<span class="tag">&lt;/<span class="name">ThemeContext.Consumer</span>&gt;</span></span></span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> withTheme</span><br></pre></td></tr></table></figure>

<ul>
<li><p>高阶组件 应用3</p>
<p>登录鉴权</p>
</li>
<li><p>高阶组件 应用4</p>
<p>生命周期</p>
</li>
</ul>
<h2 id="8、Portals"><a href="#8、Portals" class="headerlink" title="8、Portals"></a>8、Portals</h2><p>将子元素渲染到别处</p>
<p>下面案例是封装了一个组件</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//Modal.jsx</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">React</span>,&#123; <span class="title class_">PureComponent</span>&#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; createPortal &#125; <span class="keyword">from</span> <span class="string">&#x27;react-dom&#x27;</span>  <span class="comment">//引入</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">class</span> <span class="title class_">Modal</span> <span class="keyword">extends</span> <span class="title class_ inherited__">PureComponent</span>&#123;</span><br><span class="line">	<span class="title function_">render</span>(<span class="params"></span>)&#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="title function_">createPortal</span>(<span class="variable language_">this</span>.<span class="property">props</span>.<span class="property">children</span>,<span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&quot;#model&quot;</span>))</span><br><span class="line">   	<span class="comment">//createPortal需要两个参数，第一个参数是要渲染的内容，第二个是放到哪里</span></span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">Modal</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">React</span>,&#123; <span class="title class_">PureComponent</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; createPortal &#125; <span class="keyword">from</span> <span class="string">&#x27;react-dom&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">class</span> <span class="title class_">App</span> <span class="keyword">extends</span> <span class="title class_ inherited__">PureComponent</span>&#123;</span><br><span class="line">	<span class="title function_">render</span>(<span class="params"></span>)&#123;</span><br><span class="line">		<span class="keyword">return</span> (</span><br><span class="line">			<span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&#x27;app&#x27;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">				<span class="tag">&lt;<span class="name">h1</span>&gt;</span>App H1<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">				<span class="tag">&lt;<span class="name">Modal</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">						<span class="tag">&lt;<span class="name">h2</span>&gt;</span>标题<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">						<span class="tag">&lt;<span class="name">p</span>&gt;</span>内容<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">				<span class="tag">&lt;/<span class="name">Modal</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">			<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">		)</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="9、fragment"><a href="#9、fragment" class="headerlink" title="9、fragment"></a>9、fragment</h2><p>因为return中只能有一个根元素，我们不得不用<div>包裹所有元素，但是有时候我们并不想要渲染任何东西。</p>
<p>就用<fragment></fragment>包裹起来，不会渲染任何东西。</p>
<p>fragment有个语法糖：&lt;&gt;&lt;&#x2F;&gt;  但是如果fragment上面需要绑定一些东西就不能使用语法糖</p>
<h2 id="10、StrictMode"><a href="#10、StrictMode" class="headerlink" title="10、StrictMode"></a>10、StrictMode</h2><p>也不会渲染任何可见UI，仅在开发阶段运行，生产环境中看不到警告。</p>
<p><img src="https://s3-us-west-2.amazonaws.com/secure.notion-static.com/0696fdb8-1f82-4a1b-8f8e-b5f24fe6aece/Untitled.png" alt="Untitled"></p>
<h1 id="八、过度动画"><a href="#八、过度动画" class="headerlink" title="八、过度动画"></a>八、过度动画</h1><p>react-transition-group 主要包含四个组件</p>
<p><img src="https://s3-us-west-2.amazonaws.com/secure.notion-static.com/7eb84b39-d493-4ee9-a4b0-e236a8c1e724/Untitled.png" alt="Untitled"></p>
<p><img src="https://s3-us-west-2.amazonaws.com/secure.notion-static.com/8e17c582-82bc-4e66-b1e0-bbdcd833dd8b/Untitled.png" alt="Untitled"></p>
<ul>
<li>CSSTransition</li>
</ul>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">CSSTransition</span> &#125; <span class="keyword">from</span> <span class="string">&quot;react-transition-group&quot;</span></span><br><span class="line"></span><br><span class="line">&lt;<span class="title class_">CSSTransition</span> </span><br><span class="line">		<span class="keyword">in</span>=&#123;isshow&#125; <span class="comment">//in是决定显示和隐藏，为true时触发进入状态，为false时触发退出状态。</span></span><br><span class="line">		unmountOnExit=&#123;<span class="literal">true</span>&#125; <span class="comment">//unmountOnExit退出的时候卸载组件</span></span><br><span class="line">		classNames=<span class="string">&quot;why&quot;</span> <span class="comment">//classNames是动画类别</span></span><br><span class="line">		timeout=&#123;<span class="number">2000</span>&#125; <span class="comment">//必须设置timeout决定类什么时候添加，什么时候移除</span></span><br><span class="line">		appear</span><br><span class="line">	&gt;</span><br><span class="line">	<span class="language-xml"><span class="tag">&lt;<span class="name">h2</span>&gt;</span>hhh<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span><br><span class="line">&lt;/<span class="title class_">CSSTransition</span>&gt;</span><br><span class="line"></span><br><span class="line">.<span class="property">why</span>-appear, .<span class="property">why</span>-enter&#123;</span><br><span class="line">	<span class="attr">opacity</span>:<span class="number">0</span>  <span class="comment">//从0状态   初始透明度为0</span></span><br><span class="line">&#125;</span><br><span class="line">.<span class="property">why</span>-appear-active,.<span class="property">why</span>-enter-active&#123;</span><br><span class="line">	<span class="attr">opacity</span>:<span class="number">1</span> <span class="comment">//到1状态</span></span><br><span class="line">	<span class="attr">transition</span>: opacity 2s ease   <span class="comment">//动画时间</span></span><br><span class="line">&#125;</span><br><span class="line">.<span class="property">why</span>-exit&#123;</span><br><span class="line">	<span class="attr">opacity</span>:<span class="number">1</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.<span class="property">why</span>-exit-active&#123;</span><br><span class="line">	<span class="attr">opacity</span>:<span class="number">0</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>有很多钩子函数可以用来查看状态</p>
<p><img src="https://s3-us-west-2.amazonaws.com/secure.notion-static.com/0796256e-9b5b-450a-859f-325a62574bd4/Untitled.png" alt="Untitled"></p>
<ul>
<li>SwitchTransition</li>
</ul>
<p>两个元素切换</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;<span class="title class_">SwitchTransition</span> mode=<span class="string">&#x27;out-in&#x27;</span>&gt;<span class="comment">//先移除组件，新组建后进</span></span><br><span class="line">	<span class="language-xml"><span class="tag">&lt;<span class="name">CSSTransition</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">		<span class="attr">key</span>=<span class="string">&#123;isLogin</span> ? &#x27;<span class="attr">exit</span>&#x27;<span class="attr">:</span>&#x27;<span class="attr">login</span>&#x27;&#125;  //<span class="attr">设置不同的key</span>，<span class="attr">知道key换了</span>，<span class="attr">就执行动画</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">		<span class="attr">classNames</span>=<span class="string">&#x27;login&#x27;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">		<span class="attr">timeout</span>=<span class="string">&#123;1000&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">&gt;</span></span></span><br><span class="line"><span class="language-xml">	<span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;e</span> =&gt;</span> this.setState(&#123;isLogin : !isLogin&#125;)&#125;&gt;</span></span><br><span class="line"><span class="language-xml">		&#123;isLogin ? &#x27;退出&#x27;:&#x27;登录&#x27;&#125;</span></span><br><span class="line"><span class="language-xml">	<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">	<span class="tag">&lt;/<span class="name">CSSTransition</span>&gt;</span></span></span><br><span class="line">&lt;/<span class="title class_">SwitchTransition</span>&gt;</span><br></pre></td></tr></table></figure>

<ul>
<li>TransitionGroup</li>
</ul>
<p>给一组内容添加动画</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;<span class="title class_">TransitionGroup</span> component=<span class="string">&#x27;ul&#x27;</span>&gt; <span class="comment">//component指定TransitionGroup要渲染的类型，默认是component</span></span><br><span class="line">	&#123;</span><br><span class="line">		bokks.<span class="title function_">map</span>(<span class="function">(<span class="params">item,index</span>)=&gt;</span>&#123;</span><br><span class="line">			<span class="keyword">return</span>(</span><br><span class="line">				<span class="language-xml"><span class="tag">&lt;<span class="name">CSSTransition</span> <span class="attr">key</span>=<span class="string">&#123;index&#125;</span> <span class="attr">classNames</span>=<span class="string">&quot;book&quot;</span> <span class="attr">timeout</span>=<span class="string">&#123;1000&#125;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">					<span class="tag">&lt;<span class="name">li</span>&gt;</span>&#123;item.name&#125;-&#123;item.price&#125;<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">				<span class="tag">&lt;/<span class="name">CSSTransition</span>&gt;</span></span></span><br><span class="line">			)</span><br><span class="line">		&#125;)</span><br><span class="line">	&#125;</span><br><span class="line">&lt;/<span class="title class_">TransitionGroup</span>&gt;</span><br></pre></td></tr></table></figure>

<h1 id="九、React中些CSS的方法"><a href="#九、React中些CSS的方法" class="headerlink" title="九、React中些CSS的方法"></a>九、React中些CSS的方法</h1><h3 id="方案一：内联样式"><a href="#方案一：内联样式" class="headerlink" title="方案一：内联样式"></a>方案一：内联样式</h3><p><img src="https://s3-us-west-2.amazonaws.com/secure.notion-static.com/ce2f9c3e-15a9-4982-bd87-2f4535c48b24/Untitled.png" alt="Untitled"></p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">this</span>.<span class="property">state</span>=&#123;<span class="attr">titleSize</span>:<span class="number">30</span>&#125;</span><br><span class="line">&lt;h2 style=&#123;&#123;<span class="attr">color</span>:<span class="string">&quot;red&quot;</span>,<span class="attr">fontSize</span>:&#125;,<span class="attr">fontSize</span>:<span class="string">`<span class="subst">$&#123;titleSize&#125;</span>px`</span>&#125;&gt;标题&lt;/h2&gt;</span><br></pre></td></tr></table></figure>

<p>无法编写伪类</p>
<h3 id="方法二：普通的css"><a href="#方法二：普通的css" class="headerlink" title="方法二：普通的css"></a>方法二：普通的css</h3><p><img src="https://s3-us-west-2.amazonaws.com/secure.notion-static.com/45a9094d-373f-45f6-b6a1-5a78de12b210/Untitled.png" alt="Untitled"></p>
<h3 id="方法三（推荐）：css-modules"><a href="#方法三（推荐）：css-modules" class="headerlink" title="方法三（推荐）：css modules"></a>方法三（推荐）：css modules</h3><p>所有使用了webpack配置的环境都可以使用，不是react特有的。</p>
<ul>
<li><p>css文件需要改成module.css格式</p>
</li>
<li><p>引入时给他起个名字</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> homeStyle <span class="keyword">from</span> <span class="string">&quot;./Home.module.css&quot;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>使用时</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;div className=&#123;homeStyle.<span class="property">title</span>&#125;&gt;&lt;/div&gt;</span><br></pre></td></tr></table></figure>

<p><img src="https://s3-us-west-2.amazonaws.com/secure.notion-static.com/33acca76-c712-4b37-b8f1-2ed6046a5cd9/Untitled.png" alt="Untitled"></p>
</li>
</ul>
<h3 id="方法四：Less"><a href="#方法四：Less" class="headerlink" title="方法四：Less"></a>方法四：Less</h3><p><strong>Less配置</strong></p>
<p>安装craco</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i @craco/craco@alpha</span><br></pre></td></tr></table></figure>

<p>更改package.json中的启动方式</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;scripts&quot;</span>: &#123;</span><br><span class="line">    <span class="string">&quot;start&quot;</span>: <span class="string">&quot;craco start&quot;</span>,  </span><br><span class="line">    <span class="string">&quot;build&quot;</span>: <span class="string">&quot;craco build&quot;</span>,</span><br><span class="line">    <span class="string">&quot;test&quot;</span>: <span class="string">&quot;craco test&quot;</span>,</span><br><span class="line">    <span class="string">&quot;eject&quot;</span>: <span class="string">&quot;react-scripts eject&quot;</span></span><br><span class="line">  &#125;,</span><br></pre></td></tr></table></figure>

<p>为了让less文件生效</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i craco-less@alpha</span><br></pre></td></tr></table></figure>

<p>创建craco.config.js配置</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title class_">CracoLessPlugin</span> = <span class="built_in">require</span>(<span class="string">&#x27;craco-less&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">    <span class="attr">plugin</span>:[</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="attr">plugin</span>:<span class="title class_">CracoLessPlugin</span>,</span><br><span class="line">            <span class="attr">options</span>:&#123;</span><br><span class="line">                <span class="attr">lessLoaderOptions</span>:&#123;</span><br><span class="line">                    <span class="attr">lessOptions</span>:&#123;</span><br><span class="line">                        <span class="attr">modifyVars</span>:&#123;<span class="string">&#x27;@primary-color&#x27;</span>:<span class="string">&#x27;#1DA57A&#x27;</span>&#125;,</span><br><span class="line">                        <span class="attr">javascriptEnabled</span>:<span class="literal">true</span>,</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>运行   <strong>npm run start</strong> 这次使用craco运行的</p>
<h3 id="Less编写css"><a href="#Less编写css" class="headerlink" title="Less编写css"></a>Less编写css</h3><p><img src="https://s3-us-west-2.amazonaws.com/secure.notion-static.com/b6067f63-0925-4a1a-9447-d3685aa31a44/Untitled.png" alt="Untitled"></p>
<p><img src="https://s3-us-west-2.amazonaws.com/secure.notion-static.com/0bf5d5ed-df7f-47d3-910a-34885a625376/Untitled.png" alt="Untitled"></p>
<h3 id="方法五：css-in-js"><a href="#方法五：css-in-js" class="headerlink" title="*方法五：css in js"></a>*方法五：css in js</h3><p>css由JavaScript生成而不是在外部文件中定义，由第三方库提供</p>
<p>流行的css in js库：<strong>styled-components</strong>、emotion、glamorous</p>
<ul>
<li><p>安装 npm install <a href="mailto:&#x73;&#x74;&#121;&#108;&#x65;&#100;&#x2d;&#x63;&#x6f;&#109;&#x70;&#111;&#110;&#101;&#110;&#x74;&#115;&#64;&#53;&#x2e;&#x33;&#46;&#49;&#48;">&#x73;&#x74;&#121;&#108;&#x65;&#100;&#x2d;&#x63;&#x6f;&#109;&#x70;&#111;&#110;&#101;&#110;&#x74;&#115;&#64;&#53;&#x2e;&#x33;&#46;&#49;&#48;</a></p>
</li>
<li><p>使用</p>
<p>嵌套写法，安装  <strong>styled-components</strong>  使模板字符串中的css语法有提示</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">AppWrapper</span>  &#125; <span class="keyword">from</span> <span class="string">&quot;./style&quot;</span></span><br><span class="line"><span class="keyword">return</span>(</span><br><span class="line">	<span class="language-xml"><span class="tag">&lt;<span class="name">AppWrapper</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">			<span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&#x27;section&#x27;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">				<span class="tag">&lt;<span class="name">h2</span> <span class="attr">className</span>=<span class="string">&#x27;title&#x27;</span>&gt;</span>标题<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">				<span class="tag">&lt;<span class="name">p</span> <span class="attr">className</span>=<span class="string">&#x27;content&#x27;</span>&gt;</span>内容<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">			<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">			<span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&#x27;footer&#x27;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">				<span class="tag">&lt;<span class="name">p</span>&gt;</span>免责声明<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">			<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">	<span class="tag">&lt;/<span class="name">AppWrapper</span>&gt;</span></span></span><br><span class="line">)</span><br></pre></td></tr></table></figure>

<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//style.js</span></span><br><span class="line"><span class="keyword">import</span> styled <span class="keyword">from</span> <span class="string">&quot;styled-components&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> <span class="title class_">AppWrapper</span> = styled.<span class="property">div</span><span class="string">`    //导出最外层，styled.div()调用函数，用模板字符串传递</span></span><br><span class="line"><span class="string">	.section&#123;</span></span><br><span class="line"><span class="string">		border:1px solid red;</span></span><br><span class="line"><span class="string">		.title&#123;</span></span><br><span class="line"><span class="string">			font-size:30px;</span></span><br><span class="line"><span class="string">			color:blue;</span></span><br><span class="line"><span class="string">			&amp;:hover&#123;</span></span><br><span class="line"><span class="string">				background-color:purple;</span></span><br><span class="line"><span class="string">			&#125;</span></span><br><span class="line"><span class="string">		&#125;</span></span><br><span class="line"><span class="string">		.content&#123;</span></span><br><span class="line"><span class="string">			font-size:20px</span></span><br><span class="line"><span class="string">		&#125;</span></span><br><span class="line"><span class="string">	&#125;</span></span><br><span class="line"><span class="string">	.footer&#123;</span></span><br><span class="line"><span class="string">		border:1px solid orange;</span></span><br><span class="line"><span class="string">	&#125;</span></span><br><span class="line"><span class="string">`</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>子元素单独抽取到样式组件</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;<span class="title class_">AppWrapper</span>&gt;</span><br><span class="line">			<span class="language-xml"><span class="tag">&lt;<span class="name">SectionWrapper</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">				<span class="tag">&lt;<span class="name">h2</span> <span class="attr">className</span>=<span class="string">&#x27;title&#x27;</span>&gt;</span>标题<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">				<span class="tag">&lt;<span class="name">p</span> <span class="attr">className</span>=<span class="string">&#x27;content&#x27;</span>&gt;</span>内容<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">			<span class="tag">&lt;/<span class="name">SectionWrapper</span>&gt;</span></span></span><br></pre></td></tr></table></figure>

<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> <span class="title class_">AppWrapper</span> = styled.<span class="property">div</span><span class="string">`    //导出最外层，styled.div()调用函数，用模板字符串传递</span></span><br><span class="line"><span class="string">	</span></span><br><span class="line"><span class="string">	.footer&#123;</span></span><br><span class="line"><span class="string">		border:1px solid orange;</span></span><br><span class="line"><span class="string">	&#125;</span></span><br><span class="line"><span class="string">`</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> <span class="title class_">SectionWrapper</span> = style.<span class="property">div</span><span class="string">`</span></span><br><span class="line"><span class="string">	.section&#123;     //就不再写了</span></span><br><span class="line"><span class="string">			border:1px solid red;</span></span><br><span class="line"><span class="string">			.title&#123;</span></span><br><span class="line"><span class="string">				font-size:30px;</span></span><br><span class="line"><span class="string">				color:blue;</span></span><br><span class="line"><span class="string">				&amp;:hover&#123;</span></span><br><span class="line"><span class="string">					background-color:purple;</span></span><br><span class="line"><span class="string">				&#125;</span></span><br><span class="line"><span class="string">			&#125;</span></span><br><span class="line"><span class="string">			.content&#123;</span></span><br><span class="line"><span class="string">				font-size:20px</span></span><br><span class="line"><span class="string">			&#125;</span></span><br><span class="line"><span class="string">		&#125;   //去掉</span></span><br><span class="line"><span class="string">`</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>引入外部变量</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">this</span>.<span class="property">state</span>=&#123;</span><br><span class="line">	<span class="attr">size</span>:<span class="number">30</span></span><br><span class="line">	<span class="attr">color</span>:<span class="string">&#x27;yellow&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title function_">render</span>(<span class="params"></span>)&#123;</span><br><span class="line">	<span class="keyword">const</span> &#123;size,color&#125;=<span class="variable language_">this</span>.<span class="property">state</span></span><br><span class="line">	<span class="keyword">return</span>(</span><br><span class="line">		&lt;<span class="title class_">AppWrapper</span>&gt;</span><br><span class="line">			<span class="language-xml"><span class="tag">&lt;<span class="name">SectionWrapper</span> <span class="attr">size</span>=<span class="string">&#123;size&#125;</span> <span class="attr">color</span>=<span class="string">&#123;color&#125;</span>&gt;</span>  //像普通传递参数一样</span></span><br><span class="line"><span class="language-xml">	)</span></span><br><span class="line"><span class="language-xml">&#125;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> <span class="title class_">SectionWrapper</span> = style.<span class="property">div</span><span class="string">`</span></span><br><span class="line"><span class="string">			border:1px solid red;</span></span><br><span class="line"><span class="string">			.title&#123;</span></span><br><span class="line"><span class="string">				font-size:&amp;&#123;props =&gt; props.size&#125;px;   //记住写法</span></span><br><span class="line"><span class="string">				color:&amp;&#123;props =&gt; props.color&#125;;</span></span><br><span class="line"><span class="string">				&amp;:hover&#123;</span></span><br><span class="line"><span class="string">					background-color:purple;</span></span><br><span class="line"><span class="string">				&#125;</span></span><br><span class="line"><span class="string">			&#125;</span></span><br><span class="line"><span class="string">			.content&#123;</span></span><br><span class="line"><span class="string">				font-size:20px</span></span><br><span class="line"><span class="string">			&#125;</span></span><br><span class="line"><span class="string">`</span></span><br></pre></td></tr></table></figure>

<p>如果外部没有传进来，需要设置默认颜色</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> <span class="title class_">SectionWrapper</span> = style.<span class="property">div</span>.<span class="title function_">attrs</span>(<span class="function"><span class="params">props</span> =&gt;</span> (&#123;</span><br><span class="line">	<span class="attr">tcolor</span>: props.<span class="property">color</span> || <span class="string">&quot;blue&quot;</span>    <span class="comment">//如果传入了就使用props里的，没传入就用blue</span></span><br><span class="line">&#125;</span><br><span class="line">))<span class="string">` </span></span><br><span class="line"><span class="string">	.title&#123;</span></span><br><span class="line"><span class="string">				font-size:&amp;&#123;props =&gt; props.size&#125;px;   </span></span><br><span class="line"><span class="string">				color:&amp;&#123;props =&gt; props.tcolor&#125;;      //改名字，否则产生递归</span></span><br><span class="line"><span class="string"> `</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>继承</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title class_">HYButton</span> = styled.<span class="property">button</span><span class="string">`</span></span><br><span class="line"><span class="string">	border:1px solid red;</span></span><br><span class="line"><span class="string">	border-radius:5px</span></span><br><span class="line"><span class="string">`</span></span><br><span class="line"><span class="keyword">const</span> consta <span class="title class_">HYButtonWrapper</span> = <span class="title function_">styled</span>(<span class="title class_">HYButton</span>)<span class="string">`  //继承HYButton的样式</span></span><br><span class="line"><span class="string">	color:#fff</span></span><br><span class="line"><span class="string">`</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>classname库</p>
<p>安装<strong>npm install classnames</strong></p>
<p>使用</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> classNames <span class="keyword">from</span> <span class="string">&#x27;classnames&#x27;</span></span><br><span class="line"></span><br><span class="line">&lt;div&gt;</span><br><span class="line">  <span class="comment">//三元运算符</span></span><br><span class="line">	<span class="language-xml"><span class="tag">&lt;<span class="name">h2</span> <span class="attr">classname</span>=<span class="string">&#123;</span>`<span class="attr">aaa</span>  $&#123;<span class="attr">isbbb</span> ? &#x27;<span class="attr">bbb</span>&#x27;<span class="attr">:</span>&#x27;&#x27;&#125;   $&#123;<span class="attr">isbbb</span> ? &#x27;<span class="attr">bbb</span>&#x27;<span class="attr">:</span>&#x27;&#x27;&#125;`&#125;&gt;</span>嘿<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span><br><span class="line">	<span class="comment">//使用classname库</span></span><br><span class="line">	<span class="language-xml"><span class="tag">&lt;<span class="name">h2</span> <span class="attr">className</span>=<span class="string">&#123;classNames(</span>&quot;<span class="attr">aaa</span>&quot;,&#123;<span class="attr">bbb:isbbb</span>,<span class="attr">ccc:isccc</span>&#125;)&#125;&gt;</span>哈<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span><br><span class="line">	<span class="language-xml"><span class="tag">&lt;<span class="name">h2</span> <span class="attr">className</span>=<span class="string">&#123;classNames([</span>&quot;<span class="attr">aaa</span>&quot;,&#123;<span class="attr">bbb:isbbb</span>,<span class="attr">ccc:isccc</span>&#125;])&#125;&gt;</span>哈<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></table></figure></li>
</ul>
<h1 id="十、Redux-一"><a href="#十、Redux-一" class="headerlink" title="十、Redux(一)"></a>十、Redux(一)</h1><p>纯函数:</p>
<ul>
<li>确定的输入,一定会产生确定的输出(不依赖外界值)</li>
<li>函数在执行过程中,不能产生副作用(不会改变外界的值)</li>
</ul>
<p><strong>React要求我们无论是函数还是class声明一个组件,这个组件都必须像纯函数一样,保护他们的props不被修改。</strong></p>
<ul>
<li>三个核心概念<ul>
<li>store</li>
<li>action</li>
<li>reducer</li>
</ul>
</li>
</ul>
<h2 id="1、创建和使用"><a href="#1、创建和使用" class="headerlink" title="1、创建和使用"></a>1、创建和使用</h2><ul>
<li><p>store</p>
<p>安装redux   npm install redux</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> &#123; createStore &#125; = <span class="built_in">require</span>(<span class="string">&quot;redux&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">//初始化数据</span></span><br><span class="line"><span class="keyword">const</span> initialState = &#123;</span><br><span class="line">    <span class="attr">name</span>:<span class="string">&quot;why&quot;</span>,</span><br><span class="line">    <span class="attr">counter</span>:<span class="number">100</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//定义reducer</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">reducer</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="keyword">return</span> initialState</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> store = <span class="title function_">createStore</span>(reducer)</span><br><span class="line"></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = store</span><br></pre></td></tr></table></figure>

<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> store = <span class="built_in">require</span>(<span class="string">&quot;./store&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(store.<span class="title function_">getState</span>())</span><br></pre></td></tr></table></figure>
</li>
<li><p>通过action修改reducer</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//修改store中的数据:必须经过action</span></span><br><span class="line"><span class="keyword">const</span> nameAction = &#123;<span class="attr">type</span>:<span class="string">&quot;change_name&quot;</span>,<span class="attr">name</span>:<span class="string">&#x27;kobe&#x27;</span>&#125;</span><br><span class="line">store.<span class="title function_">dispatch</span>(nameAction)</span><br><span class="line"></span><br><span class="line"><span class="comment">//返回值作为下一次的参数一</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">reducer</span>(<span class="params">state=initialState,action</span>)&#123;</span><br><span class="line">    <span class="keyword">if</span>(action.<span class="property">type</span> === <span class="string">&quot;change_name&quot;</span>)&#123;</span><br><span class="line">        <span class="keyword">return</span> &#123;...state,<span class="attr">name</span>:action.<span class="property">name</span>&#125;</span><br><span class="line">    &#125;<span class="keyword">else</span> <span class="keyword">if</span> (action.<span class="property">type</span> === <span class="string">&quot;add_number&quot;</span>)&#123;</span><br><span class="line">	<span class="keyword">return</span>&#123;...state,<span class="attr">counter</span>:state.<span class="property">counter</span>+action.<span class="property">num</span>&#125;</span><br><span class="line">&#125;</span><br><span class="line">    <span class="keyword">return</span> state</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> store = <span class="title function_">createStore</span>(reducer)</span><br></pre></td></tr></table></figure>
</li>
<li><p>store数据的订阅</p>
<p>订阅</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">store.<span class="title function_">subscribe</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;订阅数据的变化:&quot;</span>,store.<span class="title function_">getState</span>())</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>取消订阅</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> unsubscribe = store.<span class="title function_">subscribe</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;订阅数据的变化:&quot;</span>,store.<span class="title function_">getState</span>())</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="title function_">unsubscribe</span>()<span class="comment">//调用这个函数就是取消订阅</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>重构reduce</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">reducer</span>(<span class="params">state=initialState,action</span>)&#123;</span><br><span class="line">    <span class="keyword">switch</span>(action.<span class="property">type</span>)&#123;</span><br><span class="line">        <span class="keyword">case</span> <span class="string">&quot;change_name&quot;</span>:</span><br><span class="line">            <span class="keyword">return</span> &#123;...state,<span class="attr">name</span>:action.<span class="property">name</span>&#125;</span><br><span class="line">        <span class="keyword">case</span> <span class="string">&quot;add_number&quot;</span>:</span><br><span class="line">            <span class="keyword">return</span> &#123;...state,<span class="attr">counter</span>:state.<span class="property">counter</span> + action.<span class="property">num</span>&#125;</span><br><span class="line">        <span class="attr">default</span>:</span><br><span class="line">            <span class="keyword">return</span> state</span><br><span class="line">        &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>动态生成action</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">changeNameAction</span> = (<span class="params">name</span>) =&gt; (&#123;</span><br><span class="line">	<span class="attr">type</span>:<span class="string">&quot;change_name&quot;</span>,</span><br><span class="line">	name</span><br><span class="line">&#125;)</span><br><span class="line">store.<span class="title function_">dispatch</span>(<span class="title function_">changeNameAction</span>(<span class="string">&quot;kobi&quot;</span>))</span><br><span class="line">store.<span class="title function_">dispatch</span>(<span class="title function_">changeNameAction</span>(<span class="string">&quot;lilei&quot;</span>))</span><br></pre></td></tr></table></figure>
</li>
<li><p>拆分文件</p>
<p><img src="https://s3-us-west-2.amazonaws.com/secure.notion-static.com/3cd17591-4e9a-490e-b8ae-616ba0e1967c/Untitled.png" alt="Untitled"></p>
<p><img src="https://s3-us-west-2.amazonaws.com/secure.notion-static.com/b2e6dc37-3628-4ecf-91a4-3d226f804b87/Untitled.png" alt="Untitled"></p>
</li>
<li><p>Redux 三大原则</p>
<p><img src="https://s3-us-west-2.amazonaws.com/secure.notion-static.com/76e22eca-aa54-4942-9661-faa5da615a79/Untitled.png" alt="Untitled"></p>
<p><img src="https://s3-us-west-2.amazonaws.com/secure.notion-static.com/203e805f-436e-4693-8b78-8bad9fb54eae/Untitled.png" alt="Untitled"></p>
</li>
</ul>
<h2 id="2、redux融入react代码"><a href="#2、redux融入react代码" class="headerlink" title="2、redux融入react代码"></a>2、redux融入react代码</h2><p>当页面使用redux时</p>
<p>1、引入store</p>
<p>2、初始化值</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">constructor</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="variable language_">super</span>()</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">state</span>=&#123;</span><br><span class="line">      <span class="attr">counter</span>:store.<span class="title function_">getState</span>().<span class="property">counter</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>

<p>3、订阅</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">componentDidMount</span>(<span class="params"></span>)&#123;</span><br><span class="line">    store.<span class="title function_">subscribe</span>(<span class="function">()=&gt;</span>&#123;</span><br><span class="line">      <span class="keyword">const</span> state = store.<span class="title function_">getState</span>()</span><br><span class="line">      <span class="variable language_">this</span>.<span class="title function_">setState</span>(&#123;<span class="attr">counter</span>:state.<span class="property">counter</span>&#125;)</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>

<p>4、数据发生改变时</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//自己调用dispatch</span></span><br><span class="line"><span class="title function_">addNumber</span>(<span class="params">num</span>)&#123;</span><br><span class="line">    store.<span class="title function_">dispatch</span>(<span class="title function_">addNumberAction</span>(num))</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>

<ul>
<li><p>优化重复代码</p>
<ul>
<li>获取数据</li>
</ul>
<p>1、安装react-redux</p>
<p>2、提供store，只需要提供一次，所以可以在app页面提供</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">React</span> <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">ReactDOM</span> <span class="keyword">from</span> <span class="string">&#x27;react-dom/client&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">App</span> <span class="keyword">from</span> <span class="string">&#x27;./App&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">Provider</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;react-redux&#x27;</span>;  <span class="comment">//引入</span></span><br><span class="line"><span class="keyword">import</span> store <span class="keyword">from</span> <span class="string">&quot;./store&quot;</span>   <span class="comment">//需要store</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> root = <span class="title class_">ReactDOM</span>.<span class="title function_">createRoot</span>(<span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;root&#x27;</span>));</span><br><span class="line">root.<span class="title function_">render</span>(</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">React.StrictMode</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">Provider</span> <span class="attr">store</span>=<span class="string">&#123;store&#125;</span>&gt;</span>   //将store添加进去</span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">App</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">Provider</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    </span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">React.StrictMode</span>&gt;</span></span></span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<p>3、来到你想使用的页面</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">React</span>, &#123; <span class="title class_">Component</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; connect &#125; <span class="keyword">from</span> <span class="string">&#x27;react-redux&#x27;</span>    <span class="comment">//1、导入</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">class</span> <span class="title class_">about</span> <span class="keyword">extends</span> <span class="title class_ inherited__">Component</span> &#123;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">render</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> &#123;counter&#125; = <span class="variable language_">this</span>.<span class="property">props</span>  <span class="comment">// 4、以props的形式传递过来</span></span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">h2</span>&gt;</span>About:&#123;counter&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">    )</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">mapStateToProps</span> = (<span class="params">state</span>) =&gt; (&#123;   <span class="comment">//3、选择哪些进行映射</span></span><br><span class="line">    <span class="attr">counter</span>:state.<span class="property">counter</span></span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title function_">connect</span>(mapStateToProps)(about)   <span class="comment">//2、高阶函数</span></span><br></pre></td></tr></table></figure>

<ul>
<li>更改数据</li>
</ul>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">React</span>, &#123; <span class="title class_">Component</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; connect &#125; <span class="keyword">from</span> <span class="string">&#x27;react-redux&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; addNumberAction &#125; <span class="keyword">from</span> <span class="string">&#x27;../store/actionCreators&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">class</span> <span class="title class_">about</span> <span class="keyword">extends</span> <span class="title class_ inherited__">Component</span> &#123;</span><br><span class="line">    </span><br><span class="line">  <span class="title function_">calNumber</span>(<span class="params">num,isAdd</span>)&#123;       </span><br><span class="line">        <span class="keyword">if</span>(isAdd)&#123;</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">props</span>.<span class="title function_">addNumber</span>(num)  <span class="comment">//被映射到props中 直接使用</span></span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">props</span>.<span class="title function_">subNumber</span>(num)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">render</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> &#123;counter&#125; = <span class="variable language_">this</span>.<span class="property">props</span></span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">h2</span>&gt;</span>About:&#123;counter&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;e</span>=&gt;</span>&#123;this.calNumber(6,true)&#125;&#125;&gt;+6<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;e</span>=&gt;</span>&#123;this.calNumber(7,true)&#125;&#125;&gt;+7<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;e</span>=&gt;</span>&#123;this.calNumber(6,false)&#125;&#125;&gt;-6<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;e</span>=&gt;</span>&#123;this.calNumber(7,false)&#125;&#125;&gt;-7<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">    )</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">mapStateToProps</span> = (<span class="params">state</span>) =&gt; (&#123;</span><br><span class="line">    <span class="attr">counter</span>:state.<span class="property">counter</span></span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">mapDispatchToProps</span> = (<span class="params">dispatch</span>) =&gt;(&#123;   </span><br><span class="line">    <span class="title function_">addNumber</span>(<span class="params">num</span>)&#123;</span><br><span class="line">        <span class="title function_">dispatch</span>(<span class="title function_">addNumberAction</span>(num))</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="title function_">subNumber</span>(<span class="params">num</span>)&#123;</span><br><span class="line">        <span class="title function_">dispatch</span>(<span class="title function_">subNumberAction</span>(num))</span><br><span class="line">    &#125;,</span><br><span class="line">    &#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title function_">connect</span>(mapStateToProps,mapDispatchToProps)(about)  <span class="comment">//第二个参数</span></span><br></pre></td></tr></table></figure></li>
</ul>
<h2 id="3、异步网络请求的操作"><a href="#3、异步网络请求的操作" class="headerlink" title="3、异步网络请求的操作"></a>3、异步网络请求的操作</h2><p>普通的action派发事件是返回action对象，但是<strong>对象中是不能直接拿到从服务器请求的异步数据的</strong></p>
<p>此时不要返回对象了，<strong>要返回一个函数。</strong></p>
<p>但是redux不支持返回函数，这时候需要进行增强  <strong>使用中间键</strong></p>
<p>1、安装 redux-thunk</p>
<p>2、在index中引入</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;createStore,applyMiddleware&#125; <span class="keyword">from</span> <span class="string">&quot;redux&quot;</span>   <span class="comment">//导入applyMiddleware</span></span><br><span class="line"><span class="keyword">import</span> reducer <span class="keyword">from</span> <span class="string">&quot;./reducer&quot;</span></span><br><span class="line"><span class="keyword">import</span> thunk <span class="keyword">from</span> <span class="string">&quot;redux-thunk&quot;</span>     <span class="comment">//导入</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> store=<span class="title function_">createStore</span>(reducer,<span class="title function_">applyMiddleware</span>(thunk))    <span class="comment">//输入第二个参数applyMiddleware并传参</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> store</span><br></pre></td></tr></table></figure>

<p>3、</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> fetchHomeMultidataAction =() =&#123;</span><br><span class="line">	<span class="keyword">function</span> <span class="title function_">foo</span>(<span class="params">dispatch,getState</span>)&#123;   <span class="comment">//会获得两个参数</span></span><br><span class="line">		axios.<span class="title function_">get</span>(<span class="string">&quot;&lt;http://123.207.32.32:8000&gt;&quot;</span>).<span class="title function_">then</span>(<span class="function"><span class="params">res</span>=&gt;</span>&#123;</span><br><span class="line">			<span class="keyword">const</span> banners = res.<span class="property">data</span>.<span class="property">banner</span>.<span class="property">list</span></span><br><span class="line">			<span class="title function_">dispatch</span>(<span class="title function_">changeBannersAction</span>(banners))   <span class="comment">//定义好的</span></span><br><span class="line">		&#125;)</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="4、工具"><a href="#4、工具" class="headerlink" title="4、工具"></a>4、工具</h2><p>开发的时候打开redux-devtool</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//添加第一句,生产时去掉||前面的代码</span></span><br><span class="line"><span class="keyword">const</span> composeEnhancers = (<span class="keyword">typeof</span> <span class="variable language_">window</span> !== <span class="string">&#x27;undefined&#x27;</span> &amp;&amp; <span class="variable language_">window</span>.<span class="property">__REDUX_DEVTOOLS_EXTENSION_COMPOSE__</span>) || compose;</span><br><span class="line"><span class="comment">//结合在一起将applyMiddleware(thunk)添加到composeEnhancers中</span></span><br><span class="line"><span class="keyword">const</span> store=<span class="title function_">createStore</span>(reducer,<span class="title function_">composeEnhancers</span>(<span class="title function_">applyMiddleware</span>(thunk)))</span><br></pre></td></tr></table></figure>

<h2 id="5、Redux模块拆分"><a href="#5、Redux模块拆分" class="headerlink" title="5、Redux模块拆分"></a>5、Redux模块拆分</h2><p>从redux导入combineReducers</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> reducer = <span class="title function_">combineReducers</span>(&#123;</span><br><span class="line">	<span class="attr">counter</span>:counterReducer,</span><br><span class="line">	<span class="attr">home</span>:homeReducer</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h1 id="十一、Redux-Toolkit"><a href="#十一、Redux-Toolkit" class="headerlink" title="十一、Redux Toolkit"></a>十一、Redux Toolkit</h1><p>1、安装  <strong>npm install @reduxjs&#x2F;toolkit react-redux</strong></p>
<p><img src="https://s3-us-west-2.amazonaws.com/secure.notion-static.com/bf22c27b-2051-458d-9f95-eefa72668a25/Untitled.png" alt="Untitled"></p>
<p>2、使用</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//counter.js</span></span><br><span class="line"><span class="keyword">import</span> &#123; createSlice &#125; <span class="keyword">from</span> <span class="string">&quot;@reduxjs/toolkit&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> counterSlice = <span class="title function_">createSlice</span>(&#123;</span><br><span class="line">    <span class="attr">name</span>:<span class="string">&quot;counter&quot;</span>,</span><br><span class="line">    <span class="attr">initialState</span>:&#123;</span><br><span class="line">        <span class="attr">counter</span>:<span class="number">9</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">reducers</span>:&#123;</span><br><span class="line">        <span class="title function_">addNumber</span>(<span class="params">state,&#123; payload &#125;</span>)&#123;    <span class="comment">//本来是action，做了一个解构，获取action.payload</span></span><br><span class="line">            state.<span class="property">counter</span> = state.<span class="property">counter</span> + payload</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="title function_">subNumber</span>(<span class="params">state,&#123; payload &#125;</span>)&#123;</span><br><span class="line">            state.<span class="property">counter</span> = state.<span class="property">counter</span> - payload</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> counterSlice.<span class="property">reducer</span></span><br><span class="line"><span class="comment">//index.js</span></span><br><span class="line"><span class="keyword">import</span> &#123;configureStore&#125; <span class="keyword">from</span> <span class="string">&quot;@reduxjs/toolkit&quot;</span></span><br><span class="line"><span class="keyword">import</span> counterReducer <span class="keyword">from</span> <span class="string">&quot;./features/counter&quot;</span></span><br><span class="line"><span class="keyword">import</span> homeReducer <span class="keyword">from</span> <span class="string">&quot;./features/home&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> store = <span class="title function_">configureStore</span>(&#123;</span><br><span class="line">    <span class="attr">reducer</span>:&#123;</span><br><span class="line">        <span class="attr">counter</span>:counterReducer,</span><br><span class="line">        <span class="attr">home</span>:homeReducer</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> store</span><br></pre></td></tr></table></figure>

<p>3、集成了thunk中间键</p>
<p>来实现异步操作</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;  createAsyncThunk, createSlice &#125; <span class="keyword">from</span> <span class="string">&quot;@reduxjs/toolkit&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> axios <span class="keyword">from</span> <span class="string">&#x27;axios&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//获取数据</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> fetchHomeMultidataAction = <span class="title function_">createAsyncThunk</span>(<span class="string">&quot;fetch/homemultidatat&quot;</span>,<span class="title function_">async</span>() =&gt; &#123;</span><br><span class="line">    <span class="keyword">const</span> res = <span class="keyword">await</span> axios.<span class="title function_">get</span>(<span class="string">&quot;&lt;http://123.207.32.32:8000/home/multidata&gt;&quot;</span>)</span><br><span class="line">    <span class="keyword">return</span> res</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> homeSlice = <span class="title function_">createSlice</span>(&#123;</span><br><span class="line">    <span class="attr">name</span>:<span class="string">&#x27;home&#x27;</span>,</span><br><span class="line">    <span class="attr">initialState</span>:&#123;</span><br><span class="line">        <span class="attr">banners</span>:[],</span><br><span class="line">        <span class="attr">recommends</span>:[]</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">reducers</span>:&#123;</span><br><span class="line"></span><br><span class="line">    &#125;,</span><br><span class="line"><span class="comment">//extraReducers专门为异步操作写的</span></span><br><span class="line"><span class="comment">//pending:发出还没有最终的结果</span></span><br><span class="line"><span class="comment">//fulfilled：获得了结果</span></span><br><span class="line"><span class="comment">//rejected：拒绝状态</span></span><br><span class="line">    <span class="attr">extraReducers</span>:&#123;</span><br><span class="line">        [fetchHomeMultidataAction.<span class="property">pending</span>](state,action)&#123;   <span class="comment">//计算属性名[ ]</span></span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(pending);</span><br><span class="line">        &#125;,</span><br><span class="line">        [fetchHomeMultidataAction.<span class="property">fulfilled</span>](state,&#123;payload&#125;)&#123;</span><br><span class="line">            state.<span class="property">banners</span> = payload.<span class="property">data</span>.<span class="property">banner</span>.<span class="property">list</span></span><br><span class="line">        &#125;,</span><br><span class="line">        [fetchHomeMultidataAction.<span class="property">rejected</span>](state,action)&#123;</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;rejected&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>在其他页面使用时，还是使用connext</p>
<p>另外2种写法：</p>
<p><img src="https://s3-us-west-2.amazonaws.com/secure.notion-static.com/1666556d-7adc-4c93-84a2-4de164499be6/Untitled.png" alt="Untitled"></p>
<p><img src="https://s3-us-west-2.amazonaws.com/secure.notion-static.com/073d6047-e3b1-4530-b95a-82aba51f1293/Untitled.png" alt="Untitled"></p>
<h3 id="connect函数的实现原理"><a href="#connect函数的实现原理" class="headerlink" title="connect函数的实现原理"></a>connect函数的实现原理</h3><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">PureComponent</span> &#125; <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> store <span class="keyword">from</span> <span class="string">&quot;../store&quot;</span></span><br><span class="line"><span class="comment">//connect的参数：参数一：函数，参数二：函数，返回值：函数</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span> <span class="title function_">connect</span>(<span class="params">mapStateToProps,mapDispatchToProps</span>)&#123;</span><br><span class="line">  <span class="comment">//由connect函数返回的高阶组件：函数</span></span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">function</span>(<span class="params">WrapperComponent</span>)&#123;</span><br><span class="line">    <span class="keyword">class</span> <span class="title class_">NewComponent</span> <span class="keyword">extends</span> <span class="title class_ inherited__">PureComponent</span>&#123;</span><br><span class="line"></span><br><span class="line">      <span class="title function_">constructor</span>(<span class="params">props</span>)&#123;</span><br><span class="line">        <span class="variable language_">super</span>(props)</span><br><span class="line">        <span class="comment">//知道用了哪些属性</span></span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">state</span> = <span class="title function_">mapStateToProps</span>(store.<span class="title function_">getState</span>())</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      <span class="comment">//监听变化</span></span><br><span class="line">      <span class="title function_">componentDidMount</span>(<span class="params"></span>)&#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">unsubscribe</span> = store.<span class="title function_">subscribe</span>(<span class="function">()=&gt;</span>&#123;</span><br><span class="line">          <span class="variable language_">this</span>.<span class="title function_">setState</span>(<span class="title function_">mapStateToProps</span>(store.<span class="title function_">getState</span>()))</span><br><span class="line">        &#125;)</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="comment">//卸载</span></span><br><span class="line">      <span class="title function_">componentWillUnmount</span>(<span class="params"></span>)&#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">unsubscribe</span></span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      <span class="title function_">render</span>(<span class="params"></span>)&#123;</span><br><span class="line">        <span class="keyword">const</span> stateObj = <span class="title function_">mapStateToProps</span>(store.<span class="title function_">getState</span>())</span><br><span class="line">        <span class="keyword">const</span> dispatchObj = <span class="title function_">mapDispatchToProps</span>(store.<span class="property">dispatch</span>)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> <span class="language-xml">&lt;WrapperComponent&#123;...this.props&#125; &#123;...stateObj&#125; &#123;...dispatchObj&#125;/&gt;</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="title class_">NewComponent</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="Thunk实现"><a href="#Thunk实现" class="headerlink" title="Thunk实现"></a>Thunk实现</h3><p>打印日志</p>
<p><img src="https://s3-us-west-2.amazonaws.com/secure.notion-static.com/a4b8eac0-8d93-43ab-9dbf-047041d4239d/Untitled.png" alt="Untitled"></p>
<p>Thunk</p>
<p>本质上就是在派发action的时候进行拦截，拦截之后让他派发另外一个函数，在另外这个函数中去派发真正的dispatch</p>
<p><img src="https://s3-us-west-2.amazonaws.com/secure.notion-static.com/24034d85-598f-49fe-b3f5-66f647211c99/Untitled.png" alt="Untitled"></p>
<h3 id="React中的state管理，三种管理方式如何选择"><a href="#React中的state管理，三种管理方式如何选择" class="headerlink" title="React中的state管理，三种管理方式如何选择"></a>React中的state管理，三种管理方式如何选择</h3><p><img src="https://s3-us-west-2.amazonaws.com/secure.notion-static.com/c7bbac35-3fe3-4d36-9e6b-ba55625caa6d/Untitled.png" alt="Untitled"></p>
<h1 id="十二、React-Router"><a href="#十二、React-Router" class="headerlink" title="十二、React-Router"></a>十二、React-Router</h1><h3 id="1、基础"><a href="#1、基础" class="headerlink" title="1、基础"></a>1、基础</h3><ul>
<li>安装React Router</li>
</ul>
<p>react-router会包含一些react-native的内容，web开发并不需要，所以安装react-router-dom</p>
<p><strong>npm install react-router-dom</strong></p>
<ul>
<li>基本使用</li>
</ul>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//index.js</span></span><br><span class="line"><span class="keyword">import</span>  <span class="title class_">ReactDOM</span>  <span class="keyword">from</span> <span class="string">&quot;react-dom/client&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">App</span> <span class="keyword">from</span> <span class="string">&quot;./App&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">BrowserRouter</span>,<span class="title class_">HashRouter</span> &#125; <span class="keyword">from</span> <span class="string">&quot;react-router-dom&quot;</span>   <span class="comment">//最常用的两个组件</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> root = <span class="title class_">ReactDom</span>.<span class="title function_">createRoot</span>(<span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&quot;#root&quot;</span>))</span><br><span class="line">root.<span class="title function_">render</span>(</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">HashRouter</span>&gt;</span>        //2、包裹</span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">App</span>/&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">HashRouter</span>&gt;</span></span></span><br><span class="line">)</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">React</span>, &#123; <span class="title class_">PureComponent</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Home</span> <span class="keyword">from</span> <span class="string">&#x27;./pages/Home&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">About</span> <span class="keyword">from</span> <span class="string">&#x27;./pages/About&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">Link</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;react-router-dom&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">class</span> <span class="title class_">App</span> <span class="keyword">extends</span> <span class="title class_ inherited__">PureComponent</span> &#123;</span><br><span class="line">  <span class="title function_">render</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&#x27;app&#x27;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&#x27;header&#x27;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">span</span>&gt;</span>Header<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&#x27;nav&#x27;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">Link</span> <span class="attr">to</span>=<span class="string">&quot;/home&quot;</span>&gt;</span>首页<span class="tag">&lt;/<span class="name">Link</span>&gt;</span>        //4、对应Link</span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">Link</span> <span class="attr">to</span>=<span class="string">&quot;/about&quot;</span>&gt;</span>关于<span class="tag">&lt;/<span class="name">Link</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&#x27;content&#x27;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            &#123;/* 配置映射关系：path=&gt;component */&#125;     //3、路由映射关系</span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">Routes</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">Route</span> <span class="attr">path</span>=<span class="string">&#x27;/home&#x27;</span> <span class="attr">element</span>=<span class="string">&#123;</span>&lt;<span class="attr">Home</span>/&gt;</span>&#125;/&gt;</span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">Route</span> <span class="attr">path</span>=<span class="string">&#x27;/about&#x27;</span> <span class="attr">element</span>=<span class="string">&#123;</span>&lt;<span class="attr">About</span>/&gt;</span>&#125;/&gt;</span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;/<span class="name">Routes</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&#x27;footer&#x27;</span>&gt;</span>footer<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">    )</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">App</span></span><br></pre></td></tr></table></figure>

<h3 id="2、Navlink的使用"><a href="#2、Navlink的使用" class="headerlink" title="2、Navlink的使用"></a>2、Navlink的使用</h3><p>NavLink时会有一个active属性</p>
<h3 id="3、Navigate导航"><a href="#3、Navigate导航" class="headerlink" title="3、Navigate导航"></a>3、Navigate导航</h3><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//没有登陆就显示按钮，登陆了就跳转</span></span><br><span class="line">&#123;!isLogin ? <span class="language-xml"><span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;e</span> =&gt;</span> this.login()&#125;&gt;登录<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span> : <span class="language-xml"><span class="tag">&lt;<span class="name">Navigate</span> <span class="attr">to</span>=<span class="string">&quot;/home&quot;</span>/&gt;</span></span>&#125;</span><br></pre></td></tr></table></figure>

<h3 id="4、路由嵌套"><a href="#4、路由嵌套" class="headerlink" title="4、路由嵌套"></a>4、路由嵌套</h3><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//App</span></span><br><span class="line">&lt;<span class="title class_">Routes</span>&gt;</span><br><span class="line">		&lt;Route path=&#x27;/&#x27; element=&#123;&lt;Navigate to=&#x27;/home&#x27;/&gt;&#125;&gt;  //重定向</span><br><span class="line"></span><br><span class="line">    &lt;Route path=&#x27;/home&#x27; element=&#123;&lt;Home/&gt;&#125;&gt;  //改成双标签</span><br><span class="line">			&lt;Route path=&#x27;/&#x27; element=&#123;&lt;Navigate to=&#x27;/home/recommend&#x27;/&gt;&#125;&gt;</span><br><span class="line">			&lt;Route path=&#x27;/home/recommend&#x27; element=&#123;&lt;HomeRecommend/&gt;&#125;&gt;</span><br><span class="line">			&lt;Route path=&#x27;/home/ranking&#x27; element=&#123;&lt;HomeRanking/&gt;&#125;&gt;</span><br><span class="line">		&lt;/Route&gt;</span><br><span class="line"></span><br><span class="line">    &lt;Route path=&#x27;/about&#x27; element=&#123;&lt;About/&gt;&#125;/&gt;</span><br><span class="line">&lt;/Routes&gt;</span><br><span class="line">//Home</span><br><span class="line">&lt;div&gt;</span><br><span class="line">	&lt;div className=&#x27;home-nav&#x27;&gt;</span><br><span class="line">		&lt;Link to=&quot;/home/recommend&quot;&gt;推荐&lt;/Link&gt;</span><br><span class="line">		&lt;Link to=&quot;/home/ranking&quot;&gt;排行榜&lt;/Link&gt;</span><br><span class="line">	&lt;/div&gt;</span><br><span class="line">	&#123;/*占位组件*/&#125;</span><br><span class="line">		&lt;Outlet/&gt;</span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></table></figure>

<h3 id="5、手动路由嵌套"><a href="#5、手动路由嵌套" class="headerlink" title="5、手动路由嵌套"></a>5、手动路由嵌套</h3><p>手动路由跳转需要通过useNavigate的Hook获取到navigate对象进行操作。</p>
<p>如果是函数式组件可以直接调用，但是如果是类组件，就要自己写一个高阶组件进行增强</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;useNavigate&#125; <span class="keyword">from</span> <span class="string">&#x27;react-router-dom&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">class</span> <span class="title class_">Home</span> <span class="keyword">extends</span> <span class="title class_ inherited__">PureComponent</span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="title function_">navigateTo</span>(<span class="params">path</span>)&#123;</span><br><span class="line">	<span class="keyword">const</span> &#123; navigate &#125; = <span class="variable language_">this</span>.<span class="property">props</span>.<span class="property">router</span>  <span class="comment">//router获取的下面定义的</span></span><br><span class="line">	<span class="title function_">navigate</span>(path)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title function_">render</span>(<span class="params"></span>)&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">withRouter</span>(<span class="params">WrapperComponent</span>)&#123;</span><br><span class="line">	<span class="keyword">return</span> <span class="keyword">function</span>(<span class="params">props</span>)&#123;</span><br><span class="line">		<span class="keyword">const</span> navigate = <span class="title function_">useNavigate</span>()   <span class="comment">//使用useNavigate</span></span><br><span class="line">		<span class="keyword">const</span> router = &#123; navigate &#125;      <span class="comment">//定义为router</span></span><br><span class="line">		<span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">WrapperComponent</span> &#123;<span class="attr">...props</span>&#125; <span class="attr">router</span>=<span class="string">&#123;router&#125;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">		&#125;</span></span><br><span class="line"><span class="language-xml">	&#125;</span></span><br><span class="line"><span class="language-xml">&#125;</span></span><br><span class="line"><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">export default withRouter(Home)</span></span><br></pre></td></tr></table></figure>

<h3 id="6、路由传参"><a href="#6、路由传参" class="headerlink" title="6、路由传参"></a>6、路由传参</h3><ul>
<li><p>动态路由</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//路由配置</span></span><br><span class="line">&lt;<span class="title class_">Route</span> path=<span class="string">&#x27;/detail/:id&#x27;</span> element=&#123;<span class="language-xml"><span class="tag">&lt;<span class="name">Detail</span>/&gt;</span></span>&#125;&gt;</span><br></pre></td></tr></table></figure>

<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//数据所在页面</span></span><br><span class="line"></span><br><span class="line">监听点击 传出id </span><br><span class="line">在方法函数中获得id 并使用 navigate 进行跳转，由于类组件里没有 navigate，所以使用封装的高阶组件withRouter</span><br><span class="line"><span class="title class_">NavigateToDetail</span>(id)&#123;</span><br><span class="line">	<span class="keyword">const</span> &#123;navigate&#125; = <span class="variable language_">this</span>.<span class="property">props</span>.<span class="property">router</span>   <span class="comment">//解构出来</span></span><br><span class="line">	<span class="title function_">navigate</span>(<span class="string">&quot;/detail/&quot;</span> + id)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//封装的withRouter</span></span><br><span class="line">要使用useParams 将 useParams也封装进withRouter</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">withRouter</span>(<span class="params">WrapperComponent</span>)&#123;</span><br><span class="line">	<span class="keyword">return</span> <span class="keyword">function</span>(<span class="params">props</span>)&#123;</span><br><span class="line">		<span class="keyword">const</span> navigate = <span class="title function_">useNavigate</span>()   <span class="comment">//使用useNavigate</span></span><br><span class="line">		<span class="keyword">const</span> params = useParams    <span class="comment">//新添加的</span></span><br><span class="line">		<span class="keyword">const</span> router = &#123; navigate params&#125;      <span class="comment">//定义为router</span></span><br><span class="line">		<span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">WrapperComponent</span> &#123;<span class="attr">...props</span>&#125; <span class="attr">router</span>=<span class="string">&#123;router&#125;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">		&#125;</span></span><br><span class="line"><span class="language-xml">	&#125;</span></span><br><span class="line"><span class="language-xml">export default withRouter</span></span><br></pre></td></tr></table></figure>

<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//Detail</span></span><br><span class="line"><span class="keyword">const</span> &#123;router&#125; = <span class="variable language_">this</span>.<span class="property">props</span>    <span class="comment">//router中包含navigate和params</span></span><br><span class="line"><span class="keyword">const</span> &#123;params&#125; = router</span><br><span class="line"><span class="keyword">return</span>(</span><br><span class="line">	<span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">		<span class="tag">&lt;<span class="name">h2</span>&gt;</span>id:&#123;params.id&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">	<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">)</span><br></pre></td></tr></table></figure>
</li>
<li><p>查询字符</p>
</li>
</ul>
<p>&#x2F;user?name&#x3D;why&amp;age&#x3D;18</p>
<p>1、第一种方式使用 useLocation，使用方式类比useParams</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> loaction = <span class="title function_">useLocation</span>() </span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> router = &#123;location&#125;</span><br></pre></td></tr></table></figure>

<p>拿出来是这种  ?name&#x3D;why&amp;age&#x3D;18</p>
<p>2、第二种方式是使用 useSearchParams</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> [ searchParams ] = <span class="title function_">useSearchParams</span>()</span><br><span class="line"><span class="keyword">const</span> query = <span class="title class_">Object</span>.<span class="title function_">fromEntries</span>(searchParams)</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> router = &#123;query&#125;</span><br></pre></td></tr></table></figure>

<h3 id="7、路由的配置方式"><a href="#7、路由的配置方式" class="headerlink" title="7、路由的配置方式"></a>7、路由的配置方式</h3><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//在App中 这是一个普通函数</span></span><br><span class="line">&#123;<span class="title function_">useRoutes</span>(routes)&#125;</span><br><span class="line"><span class="comment">//再单独的一个文件</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Home</span> <span class="keyword">from</span> <span class="string">&#x27;./pages/Home&#x27;</span></span><br><span class="line">...</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> routes = [</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="attr">path</span>:<span class="string">&#x27;/&#x27;</span>,</span><br><span class="line">		<span class="attr">element</span>:<span class="language-xml"><span class="tag">&lt;<span class="name">navigate</span> <span class="attr">to</span>=<span class="string">&quot;/home&quot;</span>/&gt;</span></span></span><br><span class="line">	&#125;,</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="attr">path</span>:<span class="string">&#x27;/home&#x27;</span>,</span><br><span class="line">		<span class="attr">element</span>:<span class="language-xml"><span class="tag">&lt;<span class="name">Home</span>/&gt;</span></span>,</span><br><span class="line">		<span class="attr">children</span>:[</span><br><span class="line">			&#123;</span><br><span class="line">				<span class="attr">path</span>:<span class="string">&#x27;/home&#x27;</span>,</span><br><span class="line">				<span class="attr">element</span>:<span class="language-xml"><span class="tag">&lt;<span class="name">navigate</span> <span class="attr">to</span>=<span class="string">&quot;/home/recommend&quot;</span>/&gt;</span></span></span><br><span class="line">			&#125;,</span><br><span class="line">			&#123;</span><br><span class="line">				<span class="attr">path</span>:<span class="string">&#x27;/home/recommend&#x27;</span>,</span><br><span class="line">				<span class="attr">element</span>:<span class="language-xml"><span class="tag">&lt;<span class="name">HomeRecommend</span>/&gt;</span></span>,</span><br><span class="line">			&#125;</span><br><span class="line">		]</span><br><span class="line">	&#125;,</span><br><span class="line">]</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> routes</span><br></pre></td></tr></table></figure>

<h3 id="8、页面懒加载（分包处理）"><a href="#8、页面懒加载（分包处理）" class="headerlink" title="8、页面懒加载（分包处理）"></a>8、页面懒加载（分包处理）</h3><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title class_">About</span> = <span class="title class_">React</span>.<span class="title function_">lazy</span>(<span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">&quot;../pages/about&quot;</span>))</span><br><span class="line"></span><br><span class="line">&lt;<span class="title class_">Suspense</span> fallback=&#123;<span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span>Loading<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span>&#125;&gt;  <span class="comment">//使用Suspense包裹 Loading应急方案</span></span><br><span class="line">	<span class="language-xml"><span class="tag">&lt;<span class="name">HashRouter</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">		<span class="tag">&lt;<span class="name">App</span>/&gt;</span></span></span><br><span class="line"><span class="language-xml">	<span class="tag">&lt;/<span class="name">HashRouter</span>&gt;</span></span></span><br><span class="line">&lt;/<span class="title class_">Suspense</span>&gt;</span><br></pre></td></tr></table></figure>

<h1 id="十三、React-Hooks"><a href="#十三、React-Hooks" class="headerlink" title="*十三、React Hooks"></a>*十三、React Hooks</h1><p>创建函数式组件快捷键rfc</p>
<p>Hook：类似于useState、这样的函数，Hooks统称。</p>
<p>以前函数式组件存在缺陷：</p>
<p>1、组件不会被重新渲染：修改ssage后，组件知道自己要重新进行渲染吗</p>
<p>2、如果页面重新渲染：函数会被重新执行，第二次重新执行，会重新给meaasge赋值为初始值</p>
<p>3、没有生命周期的回调函数</p>
<h3 id="1、useState"><a href="#1、useState" class="headerlink" title="*1、useState"></a>*1、useState</h3><p><strong>使用hook之后的函数式组件</strong>计数器例子：</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">CounterHook</span>(<span class="params">props</span>)&#123;</span><br><span class="line">	<span class="keyword">const</span> [counter,setCounter] = <span class="title function_">useState</span>(<span class="number">0</span>)  <span class="comment">//自己命名，第一个参数为数据，第二个为设置数据，0是默认值</span></span><br><span class="line">	<span class="keyword">return</span>(</span><br><span class="line">		<span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">			<span class="tag">&lt;<span class="name">h2</span>&gt;</span>当前计数器：&#123;counter&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">			<span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;e</span>=&gt;</span>setCounter(counter+1)&#125;&gt;+1<span class="tag">&lt;/<span class="name">button</span>&gt;</span>  </span></span><br><span class="line"><span class="language-xml">		<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">	)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>使用规则：</p>
<p>只能在顶部使用，只能在函数式组件中使用</p>
<h3 id="2、useEffect"><a href="#2、useEffect" class="headerlink" title="*2、useEffect"></a>*2、useEffect</h3><p>副作用代码</p>
<p>用法一：</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;useEffect&#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span></span><br><span class="line"><span class="title function_">useEffect</span>(<span class="function">()=&gt;</span>&#123;</span><br><span class="line">	<span class="comment">//当前传入的回调函数会在组件被渲染完成后，自动执行</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//先执行这个函数 </span></span><br><span class="line">	<span class="keyword">return</span> <span class="function">()=&gt;</span>&#123;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>用法二：</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;useEffect&#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span></span><br><span class="line"><span class="title function_">useEffect</span>(<span class="function">()=&gt;</span>&#123;</span><br><span class="line">	<span class="comment">//当前传入的回调函数会在组件被渲染完成后，自动执行</span></span><br><span class="line"></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>一个函数式组件中可以有多个useEffect，而不像生命周期。</p>
<p><strong>按照定义顺序执行</strong></p>
<ul>
<li>Effect的执行机制</li>
</ul>
<p>默认每次更新数据函数式组件都会更新</p>
<p>use Effect实际上有两个参数：</p>
<p>参数一：执行回调函数</p>
<p>参数二：该useEffect在哪些stste发生变化时，才重新执行。是一个数组。</p>
<p>如果只想执行一次就输入一个空的数组。只与counter有关，第二个参数就设置成[counter]</p>
<p>有返回值的，加入空数组就只会在卸载时执行return中的</p>
<h3 id="3、useContext"><a href="#3、useContext" class="headerlink" title="3、useContext"></a>3、useContext</h3><p>不用再用标签包裹</p>
<p>作用：</p>
<p><strong>1.useContext可以帮助我们跨越组件层级直接传递变量，实现数据共享。</strong></p>
<p><strong>2.Context的作用就是对它所包含的组件树提供全局共享数据的一种技术。</strong></p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span>&#123; <span class="title class_">ThemeContext</span> &#125;<span class="keyword">from</span> <span class="string">&quot;./context&quot;</span></span><br><span class="line"></span><br><span class="line">  </span><br><span class="line"><span class="keyword">const</span> <span class="title class_">App</span> = <span class="title function_">memo</span>(()=&#123;</span><br><span class="line">	<span class="keyword">const</span> theme = <span class="title function_">useContext</span>(<span class="title class_">ThemeContext</span>)  <span class="comment">//获取里面传来的值，当组件中的数据发生变化，会自动刷新</span></span><br><span class="line">	<span class="keyword">return</span>(</span><br><span class="line">			<span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">				<span class="tag">&lt;<span class="name">h2</span>&gt;</span>use:&#123;user:name&#125;-&#123;user.level&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span> //直接使用</span></span><br><span class="line"><span class="language-xml">			<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">	)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h3 id="4、useCallback-性能优化返回一个有记忆的回调函数"><a href="#4、useCallback-性能优化返回一个有记忆的回调函数" class="headerlink" title="4、useCallback 性能优化返回一个有记忆的回调函数"></a>4、useCallback 性能优化返回一个有记忆的回调函数</h3><p>作用：****<code>useCallback</code>的作用其实是用来避免子组件不必要的reRender**</p>
<p>1、当需要将一个函数传递给子组件时，最好使用useCallback进行优化，将优化后的函数，传递给子组件，即使当数据发生变化时，其他与该数据无关的部分不会更新。</p>
<p>2、进一步优化：当count发生改变时，也使用同一个函数</p>
<p>做法一：将count依赖移除，[]中不写count会造成<strong>闭包陷阱</strong></p>
<p><img src="https://s3-us-west-2.amazonaws.com/secure.notion-static.com/b23e6908-05f3-45cd-9083-6662134f4320/Untitled.png" alt="Untitled"></p>
<p>做法二：useRef在组件多次渲染时，返回的是同一个值</p>
<p><img src="https://s3-us-west-2.amazonaws.com/secure.notion-static.com/4cd7059e-7e6c-41e5-9d03-21c0b132f74b/Untitled.png" alt="Untitled"></p>
<h3 id="5、useMemo性能优化返回一个有记忆的值"><a href="#5、useMemo性能优化返回一个有记忆的值" class="headerlink" title="5、useMemo性能优化返回一个有记忆的值"></a>5、useMemo性能优化返回一个有记忆的值</h3><h3 id="6、useRef"><a href="#6、useRef" class="headerlink" title="6、useRef"></a>6、useRef</h3><p>用法一：绑定和操作DOM</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">React</span>,&#123;memo,useRef&#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title class_">App</span> = <span class="title function_">memo</span>(<span class="function">()=&gt;</span>&#123;</span><br><span class="line">	<span class="keyword">const</span> titleRef = <span class="title function_">useRef</span>()  </span><br><span class="line"></span><br><span class="line">	<span class="keyword">function</span> <span class="title function_">showTitleDom</span>(<span class="params"></span>)&#123;</span><br><span class="line">		<span class="variable language_">console</span>.<span class="title function_">log</span>(titleRef.<span class="property">current</span>)		</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span>(</span><br><span class="line">		<span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">			<span class="tag">&lt;<span class="name">h2</span> <span class="attr">ref</span>=<span class="string">&#123;titleRef&#125;</span>&gt;</span> Hello <span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">			<span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;showTitleDom&#125;</span>&gt;</span>查看title的dom<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">		<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">	)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>用法二：绑定值解决闭包陷阱问题</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title class_">App</span> = <span class="title function_">memo</span>(<span class="function">()=&gt;</span>&#123;</span><br><span class="line">	<span class="keyword">const</span> [count,setCount] = <span class="title function_">useState</span>(<span class="number">0</span>)</span><br><span class="line">	</span><br><span class="line">	<span class="keyword">const</span> nameRef = <span class="title function_">useRef</span>()   <span class="comment">//同一个对象</span></span><br><span class="line">	countRef.<span class="property">current</span> = count</span><br><span class="line">	</span><br><span class="line">	<span class="keyword">const</span> increment = <span class="title function_">useCallback</span>(<span class="function">()=&gt;</span>&#123;</span><br><span class="line">		<span class="title function_">setCount</span>(countRef.<span class="property">current</span> + <span class="number">1</span>)</span><br><span class="line">	&#125;,[])</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h3 id="7、自定义Hook"><a href="#7、自定义Hook" class="headerlink" title="7、自定义Hook"></a>7、自定义Hook</h3><p>自定义Hook的名字必须以use开头</p>
<p><img src="https://s3-us-west-2.amazonaws.com/secure.notion-static.com/c47391e8-512c-49f7-9d94-b7886f51d4b4/Untitled.png" alt="Untitled"></p>
<p>获取Context</p>
<p>类似于高阶组件</p>
<p><img src="https://s3-us-west-2.amazonaws.com/secure.notion-static.com/70b458cc-f6ac-431b-aa2e-02ac77b91383/Untitled.png" alt="Untitled"></p>
<p><img src="https://s3-us-west-2.amazonaws.com/secure.notion-static.com/9c4e8645-a77e-4c1f-91b1-af5e490a73dd/Untitled.png" alt="Untitled"></p>
<p>监听窗口滚动</p>
<p><img src="https://s3-us-west-2.amazonaws.com/secure.notion-static.com/e81d5189-def8-4b7a-9c8a-f0df41fdb937/Untitled.png" alt="Untitled"></p>
<h3 id="8、Redux-hooks"><a href="#8、Redux-hooks" class="headerlink" title="8、Redux hooks"></a>8、Redux hooks</h3><p>依然使用react-redux工具包，但是不需要使用context函数</p>
<ul>
<li>*useSelector、useDispatch</li>
</ul>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; useSelector,useDispath &#125; <span class="keyword">from</span> <span class="string">&quot;react-redux&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//1、使用use SeLector将redux中的数据映射到组件内</span></span><br><span class="line"><span class="keyword">const</span> <span class="title class_">App</span> = <span class="title function_">memo</span>(<span class="function">(<span class="params">props</span>) =&gt;</span> (&#123;</span><br><span class="line">	<span class="attr">const</span>:state.<span class="property">counter</span>.<span class="property">count</span></span><br><span class="line">&#125;))</span><br><span class="line"></span><br><span class="line"><span class="comment">//2、使用dispatch直接派发action</span></span><br><span class="line"><span class="keyword">const</span> dispatch = <span class="title function_">useDispatch</span>()</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">addNumberHandle</span>(<span class="params">num,isAdd = <span class="literal">true</span></span>)&#123;</span><br><span class="line">	<span class="keyword">if</span>(isAdd)&#123;</span><br><span class="line">		<span class="title function_">dispatch</span>(<span class="title function_">addNumberAction</span>(num))</span><br><span class="line">	&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">		<span class="title function_">dispatch</span>(<span class="title function_">subNumberAction</span>(num))</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span>(</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="comment">//不需要写context和那两个复杂的函数</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">App</span></span><br></pre></td></tr></table></figure>

<p>多个组件时，如果Home使用的是counter中的mssage，而另一个组件使用的counter中的count。当count变化时，Home也会刷新。所以要 <strong>shallowEqual</strong> 配合useSelector使用</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//* 性能优化</span></span><br><span class="line"><span class="keyword">const</span> <span class="title class_">Home</span> = <span class="title function_">memo</span>((<span class="function"><span class="params">props</span> =&gt;</span> &#123;</span><br><span class="line">	<span class="keyword">const</span> &#123; message &#125; = <span class="title function_">useSelector</span>(<span class="function">(<span class="params">state</span>) =&gt;</span> (&#123;</span><br><span class="line">		<span class="attr">message</span>:state.<span class="property">counter</span>.<span class="property">message</span></span><br><span class="line">	&#125;),shallowEqual)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="9、-服务器端渲染"><a href="#9、-服务器端渲染" class="headerlink" title="9、*服务器端渲染"></a>9、*服务器端渲染</h3><p>SPA：单页面富应用   的缺陷</p>
<p>1、不利于SEO优化：搜索引擎优化</p>
<p>因为下载下来的只有html，爬虫能爬到的内容比较少</p>
<p>2、首屏渲染速度</p>
<p>早期SSR（服务器端渲染）页面下载的是整个网页 浏览器直接渲染就好</p>
<p>而现在SPA页面下载的只有一个html，然后 下载引入文件，浏览器执行引入文件的代码。</p>
<p>解决：使用node完成下载js文件，生成html页面。</p>
<p>SSR同构应用</p>
<p>一套代码既可以在服务端运行又可以在客户端运行，这就是同构应用。</p>
<p>Node输出的内容是字符串并没有绑定js的负责交互的东西，所以浏览器服务端还是要再运行一遍，加入交互的内容，这个过程就是hyrate</p>
<h3 id="10、其他的"><a href="#10、其他的" class="headerlink" title="10、其他的"></a>10、其他的</h3><ul>
<li><p>uesid：使前端后端使用唯一的id</p>
</li>
<li><p>useTransition：返回一个状态值表示过度任务的等待状态，以及一个启动该过渡任务的函数。</p>
<p>告诉react对于某部分任务的更新优先级比较低，可以稍后进行更新。</p>
<p><img src="https://s3-us-west-2.amazonaws.com/secure.notion-static.com/c4ce114c-7cbe-4665-af1a-dd4769ec331c/Untitled.png" alt="Untitled"></p>
<p><img src="https://s3-us-west-2.amazonaws.com/secure.notion-static.com/cde88952-6da8-48e7-9c3a-93c874848a15/Untitled.png" alt="Untitled"></p>
</li>
<li><p>useDeferredValue和useTransition作用一样</p>
<p>直接使用数据副本，自动延迟</p>
</li>
</ul>
<p><img src="https://s3-us-west-2.amazonaws.com/secure.notion-static.com/709bf94b-3ebc-4e5a-9534-af84c3bb51ff/Untitled.png" alt="Untitled"></p>
<p><img src="https://s3-us-west-2.amazonaws.com/secure.notion-static.com/a92b1125-8a71-4aa0-ad6f-f1f577908d23/Untitled.png" alt="Untitled"></p>

                
                <p class="end">__END__</p>
            </div>
            <div class="article-footer">
                <div class="suffix-box">
    <div class="suffix-box-left">
        <img src="/image/sidebar/avatar.jpg" alt="Celeste;">
    </div>
    <div class="suffix-box-right">
        <span class="suffix-box-title">文章作者：</span>Celeste;
        <br>
        <span class="suffix-box-title">文章出处：</span><a href="/2023/11/30/React/" target="_blank">React</a>
        <br>
        <span class="suffix-box-title">作者签名：</span>不要温和地走入那个良夜，我们应当在日暮之时燃烧.
        <br>
        <span class="suffix-box-title">关于主题：</span><a href="https://github.com/first19326/Hexo-LiveForCode" target="_blank">Hexo - Live For Code</a>
        <br>
        <span class="suffix-box-title">版权声明：</span>文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-nd/4.0/" title="BY-NC-SA" target="_blank">BY-NC-SA</a> 许可协议，转载请注明出处
        <br>
    </div>
    <div style="clear: both;"></div>
</div>
                
                    <div class="category">
                        分类：
                        
                            <a href="/categories/%E5%89%8D%E7%AB%AF/">前端</a>
                        
                    </div>
                
                
                    <div class="tag">
                        标签：
                        
                            <a href="/tags/%E6%A1%86%E6%9E%B6/">框架</a>
                        
                    </div>
                
                <div class="article-prev-next">
                    
                    
                        <a href="/2023/11/30/%E6%A0%88%E4%B8%8E%E9%98%9F%E5%88%97/" class="next-prefix">» </a> 下一篇：    <a href="/2023/11/30/%E6%A0%88%E4%B8%8E%E9%98%9F%E5%88%97/" title="发布于 2023-11-30 09:17">栈与队列</a>
                    
                </div>
            </div>
            
    <div class="article-comments">
        
            <div class="comments-title">
                评论列表
            </div>
        
        <div class="comments-content"></div>
    </div>
    
 
        </div>
    
</div>
    <div id="footer">
    <div><span class='face'></span></div><div>【人生若只如初见<span><i class='iconfont icon-like-fill'></i></span>何事秋风悲画扇】</div><div>&copy; 2020-2023 WorstOne. All Rights Reserved.</div>
</div>
    <div id="sidebar">
    <div class="menu-wrap" style="display:none;">
        
            <div class="menu-notice">
                <span class="iconfont icon-notice"></span>
                <div class="notice">
                    <span>不要温和地走入那个良夜，我们应当在日暮之时燃烧!</span>
                </div>
            </div>
        
        <nav class="menu">
            <div class="menu-introduce"> 
                <div class="introduce-avatar">
                    <img src="/image/sidebar/avatar.jpg">
                </div> 
                <div class="introduce-info"> 
                    <div class="introduce-user">
                        
                            <a href="https://Celeste-20.github.io" target="_blank"><span>Celeste</span></a>
                        
                    </div>
                </div> 
            </div> 
            <div class="menu-list">
                <ul>
                    
                        <li class=""><a href="/" class="" target="_self"><span class="iconfont icon-home-fill"></span>首页</a></li>
                    
                        <li class=""><a href="/category" class="" target="_self"><span class="iconfont icon-folder-fill"></span>分类</a></li>
                    
                        <li class=""><a href="/tag" class="" target="_self"><span class="iconfont icon-discount-fill"></span>标签</a></li>
                    
                        <li class=""><a href="/donate" class="" target="_self"><span class="iconfont icon-heart-fill"></span>赞赏</a></li>
                    
                        <li class=""><a href="/about" class="" target="_self"><span class="iconfont icon-about-fill"></span>关于</a></li>
                    
                        <li class=""><a href="javascript:;" class="search" target="_self"><span class="iconfont icon-search-menu"></span>搜索</a></li>
                    
                        <li class=""><a href="/comment" class="" target="_self"><span class="iconfont icon-comments-fill"></span>留言板</a></li>
                    
                        <li class=""><a href="/friend" class="" target="_self"><span class="iconfont icon-link"></span>友情链接</a></li>
                    
                </ul> 
            </div> 
            <div class="menu-link">
                <div class="box">
                    <div class="image-box"></div>
                </div>
                
                    <a name="bilibili" href="https://space.bilibili.com/348499034" class="" target="_blank" data=""><span class="iconfont icon-zhihu"></span></a>
                
                    <a name="小红书" href="https://www.xiaohongshu.com/user/profile/59f1b22811be105e88264d6c" class="" target="_blank" data=""><span class="iconfont icon-weibo"></span></a>
                
                    <a name="QQ" href="javascript:;" class="image" target="_self" data="/image/sidebar/qq.jpg"><span class="iconfont icon-qq"></span></a>
                
                    <a name="微信" href="javascript:;" class="" target="_self" data=""><span class="iconfont icon-wechat"></span></a>
                
                    <a name="GitHub" href="https://github.com/Celeste-20" class="" target="_blank" data=""><span class="iconfont icon-github"></span></a>
                
            </div> 
        </nav>
        <button class="menu-button-close"></button>
        <div class="morph-shape" id="morph-shape" data-morph-open="M-7.312,0H15c0,0,66,113.339,66,399.5C81,664.006,15,800,15,800H-7.312V0z;M-7.312,0H100c0,0,0,113.839,0,400c0,264.506,0,400,0,400H-7.312V0z">
            <svg xmlns="http://www.w3.org/2000/svg" width="100%" height="100%" viewBox="0 0 100 800" preserveAspectRatio="none">
                <path d="M-7.312,0H0c0,0,0,113.839,0,400c0,264.506,0,400,0,400h-7.312V0z"/>
            </svg>
        </div>
    </div>
    <button class="menu-button-open">MENU</button>
    <div class="menu-cover"></div>
</div>
    <link type="text/css" rel="stylesheet" href="/css/search.css">
<script type="text/javascript" src="/js/iscroll.js"></script>
<script type="text/javascript" src="/js/instantsearch.min.js"></script>
<div class="search-window">
    <div class="search-content">
        <div class="search-content-icon">
            <i class="iconfont icon-search"></i>
        </div>
        <div id="search-input" class="search-input"></div>
    </div>

    <div class="search-scroll">
        <div class="search-result">
            <div id="search-stats" class="search-stats"></div>
            <div id="search-hits"></div>
            <div id="search-pagination" class="search-pagination"></div>
        </div>
    </div>

    <span class="search-close-icon">
        <i class="iconfont icon-close"></i>
    </span>
</div>
    <div id="tools">
    <div class="progressbar-top"></div>
    
    <link type="text/css" rel="stylesheet" href="/css/APlayer.css">
    <script type="text/javascript" src="/js/APlayer.min.js"></script>
    <script type="text/javascript" src="/js/Meting.min.js"></script>
    <script>
        var meting_api = 'https://api.i-meto.com/meting/api?server=:server&type=:type&id=:id&auth=:auth&r=:r';
    </script>
    <meting-js id="3778678" lrcshow="false" server="netease" type="playlist" fixed="true" autoplay="false" loop="all" order="random" preload="auto" volume="0.67" mutex="true"></meting-js>

    <div class="wrap-right">
    <div class="wrap-right-hide">
         <div class="wrap-right-button favorites">
            <div class="iconbox" switch="false">
                <span class="iconfont icon-favorites"></span>
            </div>
            <span class="icontext">关注</span>
         </div>
        <div class="wrap-right-button search">
            <div class="iconbox">
                <span class="iconfont icon-search-menu"></span>
            </div>
            <span class="icontext">搜索</span>
        </div>
        <div class="wrap-right-button menu-button">
            <div class="iconbox">
                <span class="iconfont icon-menu"></span>
            </div>
            <span class="icontext">菜单</span>
        </div>
        <div class="wrap-right-button mode">
            <div class="light">
                <div class="iconbox">
                    <span class="iconfont icon-daymode"></span>
                </div>
                <span class="icontext">浅色模式</span>
            </div>
            <div class="dark">
                <div class="iconbox">
                    <span class="iconfont icon-nightmode-fill"></span>
                </div>
                <span class="icontext">深色模式</span>
            </div>
        </div>
        <div class="wrap-right-button bottom">
            <div class="iconbox">
                <span class="iconfont icon-top"></span>
            </div>
            <span class="icontext">跳至底部</span>
        </div>
    </div>
    <div class="wrap-right-show">
        <div class="wrap-right-button set">
            <div class="iconbox">
                <span class="iconfont icon-setting"></span>
            </div>
            <span class="icontext">设置</span>
        </div>
        <div class="wrap-right-button top">
            <div class="iconbox">
                <span class="iconfont icon-top"></span>
            </div>
            <span class="icontext">返回顶部</span>
        </div>
    </div>
</div>
    <div class="loading"></div>
</div>
    <script>
    window.config = {
        GitHubUserName     : "first19326",
        GitHubRepositories : "Hexo-LiveForCode",

        User             : "Celeste",
        UserAvatar       : "/image/sidebar/avatar.jpg",
        WebsiteStartDate : "2020-09-17",
        Home             : "https://Celeste-20.github.io",

        WebsiteTitleBlur         : "Hi, Celeste",
        WebsiteTitleBlurTimeOut  : 500,
        WebsiteTitleFocus        : "(●'◡'●) 欢迎回来!",
        WebsiteTitleFocusTimeOut : 1000,
        WebsiteFavicon           : {
            light : "/image/website/logo/logo.png",
            dark  : "/image/website/logo/logo.png"
        },

        ProgressBar : {
            id       : "topProgressBar",
            color    : "#77B6FF",
            height   : "3px",
            duration : 0.2
        },

        Loading: {
            rebound : {
                tension  : 16,
                friction : 5
            },
            spinner : {
                id     : "spinner",
                radius : 90,
                sides  : 3,
                depth  : 4,
                colors : {
                    background : "#F0F0F0",
                    stroke     : "#272633",
                    base       : "",
                    child      : "#272633"
                },
                alwaysForward : true,
                restAt        : 0.5,
                renderBase    : false
            }
        },

        HomeHeaderAnimationRendered : true,
        HomeHeaderAnimation         : {
            radius      : 15,
            density     : 0.2,
            color       : "rgba(255, 255, 255, .2)",
            clearOffset : 0.3
        },

        BackAnimationRendered          : false,
        IEBrowserBackAnimationRendered : false,
        BackAnimation                  : {
            colorSaturation  : "20%",
            colorBrightness  : "50%",
            colorAlpha       : 0.5,
            colorCycleSpeed  : 5,
            verticalPosition : "random",
            horizontalSpeed  : 200,
            ribbonCount      : 5,
            strokeSize       : 0,
            parallaxAmount   : -0.3,
            animateSections  : true
        },

        HomeHeaderImage : [
            
                "/image/header/home.jpg",
            
                "/image/header/home1.jpg",
            
                "/image/header/home2.jpg",
            
                "/image/header/home3.jpg",
            
        ],
        HomeBannerText  : "",

        ArticleHeaderImage : [
            
                "/image/header/article.jpg",
            
                "/image/header/article1.jpg",
            
                "/image/header/article2.jpg",
            
                "/image/header/article3.jpg",
            
        ],

        OtherBannerText : "不要温和地走入那个良夜，我们应当在日暮之时燃烧！",

        Error : {
            icon    : "icon-swimming",
            title   : "PAGE NOT FOUND",
            content : [
                
                    "很抱歉，您访问的页面不存在！",
                
                    "可能是输入地址有误或该地址已变更。",
                
            ],
            buttons : [
                
                    {
                        icon  : "icon-home",
                        text  : "返回首页",
                        href  : "/",
                        class : ""
                    },
                
            ]
        },

        MenuNotice : {
            enable : true,
            notice : "不要温和地走入那个良夜，我们应当在日暮之时燃烧!",
            speed  : 20
        },
        MenuList : [
            
                {
                    name   : "首页",
                    icon   : "icon-home-fill",
                    href   : "/",
                    type   : "index",
                    class  : "",
                    target : "_self"
                },
            
                {
                    name   : "分类",
                    icon   : "icon-folder-fill",
                    href   : "/category",
                    type   : "category",
                    class  : "",
                    target : "_self"
                },
            
                {
                    name   : "标签",
                    icon   : "icon-discount-fill",
                    href   : "/tag",
                    type   : "tag",
                    class  : "",
                    target : "_self"
                },
            
                {
                    name   : "赞赏",
                    icon   : "icon-heart-fill",
                    href   : "/donate",
                    type   : "donate",
                    class  : "",
                    target : "_self"
                },
            
                {
                    name   : "关于",
                    icon   : "icon-about-fill",
                    href   : "/about",
                    type   : "about",
                    class  : "",
                    target : "_self"
                },
            
                {
                    name   : "搜索",
                    icon   : "icon-search-menu",
                    href   : "javascript:;",
                    type   : "",
                    class  : "search",
                    target : "_self"
                },
            
                {
                    name   : "留言板",
                    icon   : "icon-comments-fill",
                    href   : "/comment",
                    type   : "comment",
                    class  : "",
                    target : "_self"
                },
            
                {
                    name   : "友情链接",
                    icon   : "icon-link",
                    href   : "/friend",
                    type   : "friend",
                    class  : "",
                    target : "_self"
                },
            
        ],
        MenuLink : [
            
                
                    {
                        name   : "bilibili",
                        icon   : "icon-zhihu",
                        href   : "https://space.bilibili.com/348499034",
                        class  : "",
                        target : "_blank",
                        image  : ""
                    },
                
                    {
                        name   : "小红书",
                        icon   : "icon-weibo",
                        href   : "https://www.xiaohongshu.com/user/profile/59f1b22811be105e88264d6c",
                        class  : "",
                        target : "_blank",
                        image  : ""
                    },
                
                    {
                        name   : "QQ",
                        icon   : "icon-qq",
                        href   : "javascript:;",
                        class  : "image",
                        target : "_self",
                        image  : "/image/sidebar/qq.jpg"
                    },
                
                    {
                        name   : "微信",
                        icon   : "icon-wechat",
                        href   : "javascript:;",
                        class  : "",
                        target : "_self",
                        image  : ""
                    },
                
                    {
                        name   : "GitHub",
                        icon   : "icon-github",
                        href   : "https://github.com/Celeste-20",
                        class  : "",
                        target : "_blank",
                        image  : ""
                    },
                
            
        ],

        FooterStyle : 2,
        BottomText  : "<div><span class='face'></span></div><div>【人生若只如初见<span><i class='iconfont icon-like-fill'></i></span>何事秋风悲画扇】</div><div>&copy; 2020-2023 WorstOne. All Rights Reserved.</div>",

        ConsoleList : [
            
                
                    [
                        
                            
                                "Based on cnblogs theme SimpleMemory.",
                            
                                "",
                            
                        
                    ],
                
                    [
                        
                            
                                "SimpleMemory Author:",
                            
                                "BNDong",
                            
                        
                    ],
                
                    [
                        
                            
                                "Theme:",
                            
                                "LiveForCode",
                            
                        
                    ],
                
            
        ],

        FontIconExtend : "",

        Donate : {
            paypal  : "",
            bitcoin : "",
            alipay  : "",
            wechat  : "/image/donate/wechat.jpg"
        },

        Search : {
            applicationID : "010C3EANT8",
            apiKey        : "c7abab9f11b79102b9aff7fe6d41447d",
            indexName     : "Notes",
            hits          : {
                page : 10
            },
            labels        : {
                placeholder : "搜索",
                empty       : "未发现与 「${query}」 相关的内容",
                stats       : "${hits} 条相关条目，使用了 ${time} 毫秒",
            }
        }, 

        Comment : {
            switch : true,
            type   : "Valine",
        },

        Waline : {
            el              : ".comments-content",
            serverURL       : "",
            path            : window.location.pathname,
            meta            : "['nick', 'mail', 'link']",
            requiredMeta    : "['nick', 'mail']",
            pageSize        : 10,
            lang            : "zh-cn",
            locale: {
                admin       : "博主",
                anonymous   : "匿名用户",
                sofa        : "快来做第一个评论的人吧 ~",
                placeholder : "你是我一生只会遇见一次的惊喜...",
            },
            dark            : "html[color-scheme='dark']",
            search          : false,
            pageview        : true,
            comment         : true,
            copyright       : false,
        },

        Valine : {
            el             : ".comments-content",
            appId          : "srhKtvWPQTWYKh3qX8G8M7v0-gzGzoHsz",
            appKey         : "8uVSP1q6UlALVC5igYfIfv2h",
            serverURLs     : "",
            placeholder    : "你是我一生只会遇见一次的惊喜...",
            avatar         : "mm",
            meta           : "nick,mail,link",
            requiredFields : "nick,mail",
            pageSize       : 5,
            lang           : "zh-cn",
            visitor        : true,
            enableQQ       : true
        },

        Tocbot : {
            switch                : true,
            tocSelector           : ".toc",
            contentSelector       : ".article-body",
            headingSelector       : "h1, h2, h3, h4, h5",
            headingsOffset        : 0,
            scrollSmooth          : true,
            scrollSmoothOffset    : -5,
            positionFixedSelector : ".toc",
            positionFixedClass    : "toc-fixed",
            fixedSidebarOffset    : "",
        },

        Require : {
            baseUrl     : "/js/",
            waitSeconds : 100
        },

        Music : {
            type : "Meting"
        },
        APlayer : {
            container : ".aplayer",
            fixed     : true,
            autoplay  : false,
            loop      : "all",
            order     : "random",
            preload   : "auto",
            volume    : 0.67,
            mutex     : true,
            lrcType   : 3,
            audio     : [
                
                    {
                        name   : "Endless Tears",
                        artist : "CLIFF EDGE",
                        cover  : "/music/cover/Endless Tears.jpg",
                        url    : "/music/song/Endless Tears.mp3",
                        lrc    : "/music/lrc/Endless Tears.lrc"
                    },
                
            ]
        },
        Meting : {
            api      : "https://api.i-meto.com/meting/api",
            id       : "3778678", 
            lrcshow  : false, 
            server   : "netease", 
            type     : "playlist", 
            fixed    : true, 
            autoplay : false, 
            loop     : "all", 
            order    : "random", 
            preload  : "auto", 
            volume   : 0.67, 
            mutex    : true
        },

        Mouse : {
            enable  : true,
            options : {
                size  : 6,
                sizeF : 24
            }
        },

        LazyLoad : {
            default : "/image/website/lazyload.svg"
        },
  
        Style : {
            aplayer          : "/css/APlayer.css",
            archive          : "/css/archive.css",
            base             : "/css/base.css",
            clipboard        : "/css/clipboard.css",
            code             : "/css/code.css",
            donate           : "/css/donate.css",
            fancybox         : "/css/jquery.fancybox.css",
            footer           : "/css/footer.css",
            iconfont         : "/iconfont/iconfont.css",
            index            : "/css/index.css",
            menuBubble       : "/css/menu-bubble.css",
            mouse            : "/css/mouse.css",
            page             : "/css/page.css",
            post             : "/css/post.css",
            search           : "/css/search.css",
            tocbot           : "/css/tocbot.css",
            valine           : "/css/valine.css",
            waline           : "/css/waline.css",
            walineCustom     : "/css/waline-custom.css"
        },

        Script: {
            aplayer          : "/js/APlayer.min.js",
            config           : "/js/require.config.js",
            index            : "/js/index.js",
            instantSearch    : "/js/instantsearch.min.js",
            iscroll          : "/js/iscroll.js",
            jQuery           : "/js/jquery-3.4.1.min.js",
            loading          : "/js/loading.js",
            meting           : "/js/Meting.min.js",
            require          : "/js/require.min.js",
            waline           : "/js/waline.mjs",
            pageview         : "/js/pageview.mjs",
            comment          : "/js/comment.mjs",
        },

        Font: {
            LongCang    : "/font/LongCang.css",
            Monda       : "/font/Monda.css",
            NotoSansSC  : "/font/NotoSansSC.css",
            NotoSerifSC : "/font/NotoSerifSC.css",
            Playball    : "/font/Playball.css",
            PTMono      : "/font/PTMono.css",
            Roboto      : "/font/Roboto.css",
            RobotoSlab  : "/font/RobotoSlab.css",
            Rosario     : "/font/Rosario.css",
            UbuntuMono  : "/font/UbuntuMono.css"
        },

        Suffix : {
            about : "不要温和地走入那个良夜，我们应当在日暮之时燃烧."
        },
            
        Theme : {
            url  : "https://github.com/first19326/Hexo-LiveForCode",
            name : "Hexo - Live For Code"
        }  
    };
</script>
    <script type="text/javascript" src="/js/index.js"></script>
</body>
</html>